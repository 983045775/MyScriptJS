!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MyScript=t():e.MyScript=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=54)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testLogger=t.utilLogger=t.callbackLogger=t.recognizerLogger=t.rendererLogger=t.grabberLogger=t.modelLogger=t.smartGuideLogger=t.editorLogger=void 0;var r=n(55),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),i=n(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=o.noConflict();t.default=s;var c=t.editorLogger=s.getLogger(a.default.Logger.EDITOR);c.setDefaultLevel(a.default.LogLevel.ERROR);t.smartGuideLogger=s.getLogger(a.default.Logger.SMARTGUIDE);c.setDefaultLevel(a.default.LogLevel.ERROR),(t.modelLogger=s.getLogger(a.default.Logger.MODEL)).setDefaultLevel(a.default.LogLevel.ERROR),(t.grabberLogger=s.getLogger(a.default.Logger.GRABBER)).setDefaultLevel(a.default.LogLevel.ERROR),(t.rendererLogger=s.getLogger(a.default.Logger.RENDERER)).setDefaultLevel(a.default.LogLevel.ERROR),(t.recognizerLogger=s.getLogger(a.default.Logger.RECOGNIZER)).setDefaultLevel(a.default.LogLevel.ERROR),(t.callbackLogger=s.getLogger(a.default.Logger.CALLBACK)).setDefaultLevel(a.default.LogLevel.ERROR),(t.utilLogger=s.getLogger(a.default.Logger.UTIL)).setDefaultLevel(a.default.LogLevel.ERROR),(t.testLogger=s.getLogger("test")).setDefaultLevel(a.default.LogLevel.ERROR)},function(e,t,n){!function(n,r){e.exports=t=r()}(0,function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},o=r.lib={},i=o.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],o=0;o<t;o+=4){var i=function(t){var t=t,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var o=(n<<16)+t&r;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}}(4294967296*(n||e.random()));n=987654071*i(),r.push(4294967296*i()|0)}return new a.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=4*i,c=o/s;c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);var l=c*i,u=e.min(4*l,o);if(l){for(var d=0;d<l;d+=i)this._doProcessBlock(r,d);var f=r.splice(0,l);n.sigBytes-=u}return new a.init(f,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(o.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math);return e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={EventType:{IDLE:"idle",CHANGED:"changed",IMPORTED:"imported",EXPORTED:"exported",CONVERTED:"converted",RENDERED:"rendered",LOADED:"loaded",UNDO:"undo",REDO:"redo",CLEAR:"clear",IMPORT:"import",EXPORT:"export",CONVERT:"convert",ERROR:"error"},RecognitionType:{TEXT:"TEXT",MATH:"MATH",SHAPE:"SHAPE",MUSIC:"MUSIC",ANALYZER:"ANALYZER",DIAGRAM:"DIAGRAM",NEBO:"NEBO"},Protocol:{WEBSOCKET:"WEBSOCKET",REST:"REST"},ModelState:{INITIALIZING:"INITIALIZING",INITIALIZED:"INITIALIZED",EXPORTING:"EXPORTING",EXPORTED:"EXPORTED",PENDING:"PENDING",MODIFIED:"MODIFIED",ERROR:"ERROR"},Trigger:{QUIET_PERIOD:"QUIET_PERIOD",POINTER_UP:"POINTER_UP",DEMAND:"DEMAND"},Logger:{EDITOR:"editor",MODEL:"model",GRABBER:"grabber",RENDERER:"renderer",RECOGNIZER:"recognizer",CALLBACK:"callback",UTIL:"util",SMARTGUIDE:"smartguide"},LogLevel:{TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR"},Languages:{zh_CN:"Noto Sans CJK tc",zh_HK:"Noto Sans CJK tc",zh_TW:"Noto Sans CJK tc",ko_KR:"Noto Sans CJK kr",ja_JP:"Noto Sans CJK jp",hy_AM:"Noto Sans Armenian",default:"Open Sans"},Error:{NOT_REACHABLE:"MyScript recognition server is not reachable. Please reload once you are connected.",WRONG_CREDENTIALS:"Application credentials are invalid. Please check or regenerate your application key and hmackey."},Exports:{JIIX:"application/vnd.myscript.jiix"}};t.default=r},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return{currentStroke:void 0,rawStrokes:[],strokeGroups:[],lastPositions:{lastSentPosition:-1,lastReceivedPosition:-1,lastRenderedPosition:-1},defaultSymbols:e?(0,k.getDefaultSymbols)(e):[],recognizedSymbols:void 0,exports:void 0,rawResults:{convert:void 0,exports:void 0},creationTime:(new Date).getTime(),modificationTime:void 0}}function i(e){var t=e;return t.currentStroke=void 0,t.rawStrokes=[],t.strokeGroups=[],t.lastPositions.lastSentPosition=-1,t.lastPositions.lastReceivedPosition=-1,t.lastPositions.lastRenderedPosition=-1,t.recognizedSymbols=void 0,t.exports=void 0,t.rawResults.convert=void 0,t.rawResults.exports=void 0,t}function a(e){return!!e.recognizedSymbols&&e.rawStrokes.length!==e.recognizedSymbols.filter(function(e){return"stroke"===e.type}).length}function s(e,t){var n=e;return S.modelLogger.debug("addStroke",t),n.rawStrokes.push(t),n}function c(e,t,n){var r=e;S.modelLogger.debug("addStroke",t);var o=r.strokeGroups.length-1;if(r.strokeGroups[o]&&r.strokeGroups[o].penStyle===n)r.strokeGroups[o].strokes.push(t);else{var i={penStyle:n,strokes:[]},a={};Object.assign(a,t),i.strokes.push(a),r.strokeGroups.push(i)}return r}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lastPositions.lastReceivedPosition+1;return e.rawStrokes.slice(t)}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:96;if(n&&n["-myscript-pen-width"]){var o=n["-myscript-pen-width"]*r/25.4;Object.assign(n,{width:o/2})}var i=e;return S.modelLogger.trace("initPendingStroke",t),i.currentStroke=P.createStrokeComponent(n),i.currentStroke=P.addPoint(i.currentStroke,t),i}function d(e,t){var n=e;return n.currentStroke&&(S.modelLogger.trace("appendToPendingStroke",t),n.currentStroke=P.addPoint(n.currentStroke,t)),n}function f(e,t,n){var r=e;if(r.currentStroke){S.modelLogger.trace("endPendingStroke",t);var o=P.addPoint(r.currentStroke,t);s(r,o),c(r,o,n),delete r.currentStroke}return r}function p(e){var t={minX:Number.MAX_VALUE,maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE};return e.defaultSymbols&&e.defaultSymbols.length>0&&(t=(0,k.getSymbolsBounds)(e.defaultSymbols,t)),e.recognizedSymbols&&e.recognizedSymbols.length>0?(t=(0,k.getSymbolsBounds)(e.recognizedSymbols,t),t=(0,k.getSymbolsBounds)(l(e),t)):t=(0,k.getSymbolsBounds)(e.rawStrokes,t),t}function g(e,t,n,r,o){return e.rawStrokes.slice(t,n+1).map(function(e,t,n){return n.length<2?P.slice(e,r,o+1):0===t?P.slice(e,r):t===n.length-1?P.slice(e,0,o+1):e})}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.rawStrokes.length-1,n=e;return n.lastPositions.lastSentPosition=t,n}function v(e){var t=e;return t.lastPositions.lastReceivedPosition=t.lastPositions.lastSentPosition,t}function m(e){var t=e;return t.lastPositions.lastSentPosition=-1,t.lastPositions.lastReceivedPosition=-1,t}function y(e){var t=e;return t.lastPositions.lastRenderedPosition=-1,t}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.recognizedSymbols?e.recognizedSymbols.length-1:-1,n=e;return n.lastPositions.lastRenderedPosition=t,n}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lastPositions.lastRenderedPosition+1;return e.recognizedSymbols?e.recognizedSymbols.slice(t):[]}function _(e){var t=Object.assign({},e);return t.defaultSymbols=[].concat(r(e.defaultSymbols)),t.currentStroke=e.currentStroke?Object.assign({},e.currentStroke):void 0,t.rawStrokes=[].concat(r(e.rawStrokes)),t.strokeGroups=JSON.parse(JSON.stringify(e.strokeGroups)),t.lastPositions=Object.assign({},e.lastPositions),t.exports=e.exports?Object.assign({},e.exports):void 0,t.rawResults=Object.assign({},e.rawResults),t.recognizedSymbols=e.recognizedSymbols?[].concat(r(e.recognizedSymbols)):void 0,t}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){var n=e;return n.recognizedSymbols=t.recognizedSymbols,n.lastPositions.lastSentPosition=t.lastPositions.lastSentPosition,n.lastPositions.lastReceivedPosition=t.lastPositions.lastReceivedPosition,n.lastPositions.lastRenderedPosition=t.lastPositions.lastRenderedPosition,n.rawResults=t.rawResults,n.exports=t.exports,n})}Object.defineProperty(t,"__esModule",{value:!0}),t.createModel=o,t.clearModel=i,t.needRedraw=a,t.addStroke=s,t.addStrokeToGroup=c,t.extractPendingStrokes=l,t.initPendingStroke=u,t.appendToPendingStroke=d,t.endPendingStroke=f,t.getBorderCoordinates=p,t.extractStrokesFromInkRange=g,t.updateModelSentPosition=h,t.updateModelReceivedPosition=v,t.resetModelPositions=m,t.resetModelRendererPosition=y,t.updateModelRenderedPosition=b,t.extractPendingRecognizedSymbols=x,t.cloneModel=_,t.mergeModels=E;var S=n(0),w=n(6),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(w),k=n(63)},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(10))}(0,function(e){e.lib.Cipher||function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc,c=(s.Utf8,s.Base64),l=n.algo,u=l.EvpKDF,d=r.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?S:x}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),f=(r.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),p=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=f.CBC=function(){function e(e,n,r){var o=this._iv;if(o){var i=o;this._iv=t}else var i=this._prevBlock;for(var a=0;a<r;a++)e[n+a]^=i[a]}var n=p.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize;e.call(this,t,n,o),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(t,n){var r=this._cipher,o=r.blockSize,i=t.slice(n,n+o);r.decryptBlock(t,n),e.call(this,t,n,o),this._prevBlock=i}}),n}(),h=n.pad={},v=h.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(o);var c=i.create(a,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:g,padding:v}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=n.format={},b=y.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=i.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=i.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:r})}},x=r.SerializableCipher=o.extend({cfg:o.extend({format:b}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),i=o.finalize(t),a=o.cfg;return m.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=n.kdf={},E=_.OpenSSL={execute:function(e,t,n,r){r||(r=i.random(8));var o=u.create({keySize:t+n}).compute(e,r),a=i.create(o.words.slice(t),4*n);return o.sigBytes=4*t,m.create({key:o,iv:a,salt:r})}},S=r.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:E}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=o.iv;var i=x.encrypt.call(this,e,t,o.key,r);return i.mixIn(o),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=o.iv,x.decrypt.call(this,e,t,o.key,r)}})}()})},function(e,t,n){"use strict";function r(e){var t=Date.now();return l.recognizerLogger.info("Create empty recognizer context with ID: "+t),{id:t,editor:e,recognitionContexts:[],initPromise:void 0,lastPositions:{lastSentPosition:-1,lastReceivedPosition:-1},url:void 0,websocket:void 0,websocketCallback:void 0,reconnect:void 0,currentReconnectionCount:0,sessionId:void 0,contentPartCount:0,currentPartId:void 0,instanceId:void 0,canUndo:!1,canRedo:!1,isEmpty:void 0,undoStackIndex:0,possibleUndoCount:0,idle:!0,initialized:!1}}function o(e,t){return!!e.lastPositions&&e.lastPositions.lastSentPosition>=t.rawStrokes.length-1}function i(e,t){var n=e;return t&&(n.lastPositions.lastSentPosition=t.lastSentPosition,n.lastPositions.lastReceivedPosition=t.lastReceivedPosition),n.lastPositions.lastSentPosition===n.lastPositions.lastReceivedPosition===-1&&delete n.instanceId,n}function a(e,t){var n=e;return n.recognitionContexts[0]=t,n}function s(e){return!0===e.websocket.autoReconnect&&e.currentReconnectionCount<=e.websocket.maxRetryCount}function c(e){var t=e;return!0===t.websocket.autoReconnect&&t.currentReconnectionCount++<=t.websocket.maxRetryCount}Object.defineProperty(t,"__esModule",{value:!0}),t.CLOSE_RECOGNIZER_MESSAGE=t.LOST_CONNEXION_MESSAGE=void 0,t.createEmptyRecognizerContext=r,t.isResetRequired=o,t.updateRecognitionPositions=i,t.setRecognitionContext=a,t.canReconnect=s,t.shouldAttemptImmediateReconnect=c;var l=n(0);t.LOST_CONNEXION_MESSAGE={type:"LOST_CONNECTION"},t.CLOSE_RECOGNIZER_MESSAGE="CLOSE_RECOGNIZER"},function(e,t,n){"use strict";function r(e,t,n,r,o){var i=Math.sqrt(Math.pow(t-r[o-1],2)+Math.pow(e-n[o-1],2));return isNaN(i)?0:i}function o(e,t,n,o,i,a){var s=i[a-1]+r(e,t,n,o,a);return isNaN(s)?0:s}function i(e,t,n,i,a,s){var c=1,l=r(e,t,n,i,s),u=o(e,t,n,i,a,s);0===u?c=.5:l===u?c=1:l<10?c=.2+Math.pow(.1*l,.4):l>u-10&&(c=.2+Math.pow(.1*(u-l),.4));var d=c*Math.max(.1,1-.1*Math.sqrt(l));return isNaN(parseFloat(d))?.5:d}function a(e,t,n,r,o){var i=2+o/4,a=!1;return(0===n.length||0===r.length||Math.abs(n[n.length-1]-e)>=i||Math.abs(r[r.length-1]-t)>=i)&&(a=!0),a}function s(e){var t={type:"stroke",x:[],y:[],t:[],p:[],l:[],width:0};return Object.assign({},t,e)}function c(e){return{type:e.type,x:e.x,y:e.y,t:e.t}}function l(e){return{x:e.x,y:e.y,t:e.t}}function u(e,t){var n=e;return a(t.x,t.y,n.x,n.y,n.width)?(n.x.push(t.x),n.y.push(t.y),n.t.push(t.t),n.p.push(i(t.x,t.y,n.x,n.y,n.l,n.x.length-1)),n.l.push(o(t.x,t.y,n.x,n.y,n.l,n.x.length-1))):p.modelLogger.trace("ignore filtered point",t),n}function d(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.x.length,r=s({color:e.color,width:e.width}),o=t;o<n;o++)u(r,{x:e.x[o],y:e.y[o],t:e.t[o]});return r}function f(e,t){var n=void 0;return void 0!==t&&t>=0&&t<e.x.length&&(n={x:e.x[t],y:e.y[t],t:e.t[t],p:e.p[t],l:e.l[t]}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.createStrokeComponent=s,t.toJSON=c,t.toJSONV4=l,t.addPoint=u,t.slice=d,t.getPointByIndex=f;var p=n(0)},function(e,t,n){"use strict";function r(e,t){this._groups=e,this._parents=t}function o(){return new r([[document.documentElement]],z)}n.d(t,"c",function(){return z}),t.a=r;var i=n(68),a=n(69),s=n(70),c=n(71),l=n(42),u=n(73),d=n(74),f=n(75),p=n(76),g=n(77),h=n(78),v=n(79),m=n(80),y=n(81),b=n(82),x=n(83),_=n(44),E=n(84),S=n(85),w=n(86),P=n(87),k=n(88),R=n(89),C=n(90),T=n(91),L=n(92),M=n(93),A=n(94),O=n(27),I=n(95),z=[null];r.prototype=o.prototype={constructor:r,select:i.a,selectAll:a.a,filter:s.a,data:c.a,enter:l.b,exit:u.a,merge:d.a,order:f.a,sort:p.a,call:g.a,nodes:h.a,node:v.a,size:m.a,empty:y.a,each:b.a,attr:x.a,style:_.a,property:E.a,classed:S.a,text:w.a,html:P.a,raise:k.a,lower:R.a,append:C.a,insert:T.a,remove:L.a,clone:M.a,datum:A.a,on:O.b,dispatch:I.a},t.b=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){var r=u.resetModelPositions(t);c.recognizerLogger.debug("Updated model",r);var o=f.updateRecognitionPositions(e,r.lastPositions);o.initPromise=Promise.resolve(r),o.initPromise.then(function(e){o.initialized=!0,c.recognizerLogger.debug("Updated recognizer context",o),n(void 0,e,g.default.EventType.LOADED)})}function i(e,t,n){var r=u.resetModelPositions(t);c.recognizerLogger.debug("Updated model",r);var o=f.updateRecognitionPositions(e,r.lastPositions);delete o.instanceId,c.recognizerLogger.debug("Updated recognizer context",o),n(void 0,r)}function a(e,t,n){var r=u.cloneModel(t);u.clearModel(r),c.recognizerLogger.debug("Updated model",r);var o=f.updateRecognitionPositions(e,r.lastPositions);delete o.instanceId,c.recognizerLogger.debug("Updated recognizer context",o),n(void 0,r,g.default.EventType.CHANGED,g.default.EventType.EXPORTED)}function s(e,t,n){var r=e;r.initialized=!1,delete r.instanceId,n(void 0,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=o,t.reset=i,t.clear=a,t.close=s;var c=n(0),l=n(3),u=r(l),d=n(5),f=r(d),p=n(2),g=function(e){return e&&e.__esModule?e:{default:e}}(p)},function(e,t,n){"use strict";function r(e,t,n){var r="object"===(void 0===e?"undefined":o(e))?JSON.stringify(e):e;return c.recognizerLogger.debug("The HmacSHA512 function is loaded",s.default),new s.default(r,t+n).toString(i.enc.Hex)}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.computeHmac=r;var i=n(103),a=n(127),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=n(0)},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(29),n(20))}(0,function(e){return function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.algo,a=i.MD5,s=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),a=i.words,s=n.keySize,c=n.iterations;a.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var u=1;u<c;u++)l=r.finalize(l),r.reset();i.concat(l)}return i.sigBytes=4*s,i}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.EvpKDF})},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(){function t(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=(s|c)<<24-i%4*8,i++}return o.create(r,i)}var n=e,r=n.lib,o=r.WordArray,i=n.enc;i.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=t[i>>>2]>>>24-i%4*8&255,s=t[i+1>>>2]>>>24-(i+1)%4*8&255,c=t[i+2>>>2]>>>24-(i+2)%4*8&255,l=a<<16|s<<8|c,u=0;u<4&&i+.75*u<n;u++)o.push(r.charAt(l>>>6*(3-u)&63));var d=r.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var n=e.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var a=r.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(n=s)}return t(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(t){function n(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+o+a;return(s<<i|s>>>32-i)+t}function r(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+o+a;return(s<<i|s>>>32-i)+t}function o(e,t,n,r,o,i,a){var s=e+(t^n^r)+o+a;return(s<<i|s>>>32-i)+t}function i(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+o+a;return(s<<i|s>>>32-i)+t}var a=e,s=a.lib,c=s.WordArray,l=s.Hasher,u=a.algo,d=[];!function(){for(var e=0;e<64;e++)d[e]=4294967296*t.abs(t.sin(e+1))|0}();var f=u.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var s=t+a,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var l=this._hash.words,u=e[t+0],f=e[t+1],p=e[t+2],g=e[t+3],h=e[t+4],v=e[t+5],m=e[t+6],y=e[t+7],b=e[t+8],x=e[t+9],_=e[t+10],E=e[t+11],S=e[t+12],w=e[t+13],P=e[t+14],k=e[t+15],R=l[0],C=l[1],T=l[2],L=l[3];R=n(R,C,T,L,u,7,d[0]),L=n(L,R,C,T,f,12,d[1]),T=n(T,L,R,C,p,17,d[2]),C=n(C,T,L,R,g,22,d[3]),R=n(R,C,T,L,h,7,d[4]),L=n(L,R,C,T,v,12,d[5]),T=n(T,L,R,C,m,17,d[6]),C=n(C,T,L,R,y,22,d[7]),R=n(R,C,T,L,b,7,d[8]),L=n(L,R,C,T,x,12,d[9]),T=n(T,L,R,C,_,17,d[10]),C=n(C,T,L,R,E,22,d[11]),R=n(R,C,T,L,S,7,d[12]),L=n(L,R,C,T,w,12,d[13]),T=n(T,L,R,C,P,17,d[14]),C=n(C,T,L,R,k,22,d[15]),R=r(R,C,T,L,f,5,d[16]),L=r(L,R,C,T,m,9,d[17]),T=r(T,L,R,C,E,14,d[18]),C=r(C,T,L,R,u,20,d[19]),R=r(R,C,T,L,v,5,d[20]),L=r(L,R,C,T,_,9,d[21]),T=r(T,L,R,C,k,14,d[22]),C=r(C,T,L,R,h,20,d[23]),R=r(R,C,T,L,x,5,d[24]),L=r(L,R,C,T,P,9,d[25]),T=r(T,L,R,C,g,14,d[26]),C=r(C,T,L,R,b,20,d[27]),R=r(R,C,T,L,w,5,d[28]),L=r(L,R,C,T,p,9,d[29]),T=r(T,L,R,C,y,14,d[30]),C=r(C,T,L,R,S,20,d[31]),R=o(R,C,T,L,v,4,d[32]),L=o(L,R,C,T,b,11,d[33]),T=o(T,L,R,C,E,16,d[34]),C=o(C,T,L,R,P,23,d[35]),R=o(R,C,T,L,f,4,d[36]),L=o(L,R,C,T,h,11,d[37]),T=o(T,L,R,C,y,16,d[38]),C=o(C,T,L,R,_,23,d[39]),R=o(R,C,T,L,w,4,d[40]),L=o(L,R,C,T,u,11,d[41]),T=o(T,L,R,C,g,16,d[42]),C=o(C,T,L,R,m,23,d[43]),R=o(R,C,T,L,x,4,d[44]),L=o(L,R,C,T,S,11,d[45]),T=o(T,L,R,C,k,16,d[46]),C=o(C,T,L,R,p,23,d[47]),R=i(R,C,T,L,u,6,d[48]),L=i(L,R,C,T,y,10,d[49]),T=i(T,L,R,C,P,15,d[50]),C=i(C,T,L,R,v,21,d[51]),R=i(R,C,T,L,S,6,d[52]),L=i(L,R,C,T,g,10,d[53]),T=i(T,L,R,C,_,15,d[54]),C=i(C,T,L,R,f,21,d[55]),R=i(R,C,T,L,b,6,d[56]),L=i(L,R,C,T,k,10,d[57]),T=i(T,L,R,C,m,15,d[58]),C=i(C,T,L,R,w,21,d[59]),R=i(R,C,T,L,h,6,d[60]),L=i(L,R,C,T,E,10,d[61]),T=i(T,L,R,C,p,15,d[62]),C=i(C,T,L,R,x,21,d[63]),l[0]=l[0]+R|0,l[1]=l[1]+C|0,l[2]=l[2]+T|0,l[3]=l[3]+L|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296),a=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=l._createHelper(f),a.HmacMD5=l._createHmacHelper(f)}(Math),e.MD5})},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,a=n.x64={};a.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),e})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n,r){var o=t.editor.configuration;return s.post(t,o.recognitionParams.server.scheme+"://"+o.recognitionParams.server.host+e,r(t,n),"V3").then(function(e){i.recognizerLogger.debug("Cdkv3RestRecognizer success",e);var n=t.lastPositions;n.lastReceivedPosition=n.lastSentPosition;var r=u.updateRecognitionPositions(t,n);return e.instanceId&&(r.instanceId=e.instanceId),e})}Object.defineProperty(t,"__esModule",{value:!0}),t.postMessage=o;var i=n(0),a=n(47),s=r(a),c=n(3),l=(r(c),n(5)),u=r(l)},function(e,t,n){"use strict";function r(e){var t=(0,i.default)({},s,void 0===e?{}:e);return a.editorLogger.debug("Override default configuration",t),t}Object.defineProperty(t,"__esModule",{value:!0}),t.overrideDefaultConfiguration=r;var o=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(0),s={recognitionParams:{type:"TEXT",protocol:"WEBSOCKET",apiVersion:"V4",server:{scheme:"https",host:"cloud.myscript.com",applicationKey:void 0,hmacKey:void 0,websocket:{pingEnabled:!0,pingDelay:3e4,maxPingLostCount:10,autoReconnect:!0,maxRetryCount:2,fileChunkSize:3e5}},v4:{lang:"en_US",export:{"image-resolution":300,jiix:{"bounding-box":!1,strokes:!1,text:{chars:!1,words:!0}}},renderer:{debug:{"draw-text-boxes":!1,"draw-image-boxes":!1}},math:{mimeTypes:["application/x-latex","application/mathml+xml"],solver:{enable:!0,"fractional-part-digits":3,"decimal-separator":".","rounding-mode":"half up","angle-unit":"deg"},margin:{bottom:10,left:15,right:15,top:10}},text:{guides:{enable:!0},smartGuide:!0,smartGuideFadeOut:{enable:!1,duration:1e4},mimeTypes:["text/plain","application/vnd.myscript.jiix"],margin:{top:20,left:10,right:10}},diagram:{mimeTypes:["application/vnd.myscript.jiix"],margin:{bottom:10,left:15,right:15,top:10}}},v3:{mathParameter:{resultTypes:["LATEX","MATHML"],columnarOperation:!1,userResources:[],scratchOutDetectionSensitivity:1},textParameter:{language:"en_US",textInputMode:"CURSIVE",resultDetail:"TEXT",contentTypes:[],subsetKnowledges:[],userLkWords:[],userResources:[],textProperties:{textCandidateListSize:1,wordCandidateListSize:void 0,wordPredictionListSize:0,wordCompletionListSize:0,characterCandidateListSize:void 0,enableOutOfLexicon:!1,discardCaseVariations:!1,discardAccentuationVariations:!1,glyphDistortion:void 0,enableTagger:!1,spellingDistortion:void 0}},shapeParameter:{userResources:void 0,rejectDetectionSensitivity:1,doBeautification:!0},musicParameter:{divisions:480,resultTypes:["MUSICXML","SCORETREE"],userResources:[],staff:{top:100,count:5,gap:20},clef:{symbol:"G",octave:0,line:2},scratchOutDetectionSensitivity:1},analyzerParameter:{textParameter:{textProperties:{},language:"en_US",textInputMode:"CURSIVE"},coordinateResolution:void 0}}},listenerOptions:{capture:!1,passive:!0},undoRedoMaxStackSize:20,xyFloatPrecision:0,timestampFloatPrecision:0,triggerDelay:2e3,processDelay:0,resizeTriggerDelay:200,triggers:{exportContent:"POINTER_UP",addStrokes:"POINTER_UP"},restConversionState:"",renderingParams:{stroker:"quadratic",minHeight:100,minWidth:100}};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,u.default)({},f,void 0===e?{}:e);return d.editorLogger.debug("Override default pen style",t),t}function i(e){var t=p.toCSS({css:e});return t.substring(6,t.length-3)}function a(e){return p.toJSON("css {"+e+"}").css}Object.defineProperty(t,"__esModule",{value:!0}),t.overrideDefaultPenStyle=o,t.toCSS=i,t.toJSON=a;var s=n(34),c=r(s),l=n(21),u=r(l),d=n(0),f=void 0,p=new c.default;t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,u.default)({},f,void 0===e?{}:e);return d.editorLogger.debug("Override default theme",t),t}function i(e){return p.toCSS(e)}function a(e){return p.toJSON(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.overrideDefaultTheme=o,t.toCSS=i,t.toJSON=a;var s=n(34),c=r(s),l=n(21),u=r(l),d=n(0),f={ink:{color:"#000000","-myscript-pen-width":1,"-myscript-pen-fill-style":"none","-myscript-pen-fill-color":"#FFFFFF00"},".math":{"font-family":"STIXGeneral"},".math-solved":{"font-family":"STIXGeneral",color:"#A8A8A8FF"},".text":{"font-family":"Open Sans","font-size":10}},p=new c.default;t.default=f},function(e,t,n){"use strict";function r(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===a.b&&t.documentElement.namespaceURI===a.b?t.createElement(e):t.createElementNS(n,e)}}function o(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var i=n(23),a=n(24);t.a=function(e){var t=Object(i.a)(e);return(t.local?o:r)(t)}},function(e,t,n){"use strict";t.a=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){!function(){var t=e,n=t.lib,r=n.Base,o=t.enc,i=o.Utf8,a=t.algo;a.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}()})},function(e,t,n){"use strict";function r(e){e=e||{};var t=arguments.length,n=0;if(1===t)return e;for(;++n<t;){var r=arguments[n];s(e)&&(e=r),i(r)&&o(e,r)}return e}function o(e,t){c(e,t);for(var n in t)if(a(t,n)){var o=t[n];i(o)?("undefined"===l(e[n])&&"function"===l(o)&&(e[n]=o),e[n]=r(e[n]||{},o)):e[n]=o}return e}function i(e){return"object"===l(e)||"function"===l(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}/*!
 * assign-deep <https://github.com/jonschlinkert/assign-deep>
 *
 * Copyright (c) 2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var s=n(56),c=n(57),l=n(58);e.exports=r},function(e,t,n){"use strict";function r(e){var t=(e+Math.PI)%(2*Math.PI)-Math.PI;return t<-Math.PI&&(t+=2*Math.PI),t}function o(e,t,n,r,o,i,a){var s=Math.cos(o),c=Math.sin(o),l=s,u=c;s*=n,l*=r,c*=n,u*=r;var d=Math.floor(Math.abs(a)/.02),f=[];e.save();try{e.beginPath();for(var p=0;p<=d;p++){var g=i+p/d*a,h=Math.atan2(Math.sin(g)/r,Math.cos(g)/n),v=Math.cos(h),m=Math.sin(h),y=t.x+s*v-u*m,b=t.y+l*m+c*v;0===p?e.moveTo(y,b):e.lineTo(y,b),0!==p&&p!==d||f.push({x:y,y:b})}e.stroke()}finally{e.restore()}return f}function i(e,t,n,o){var i=r(n+Math.PI*(7/8)),a=r(n-Math.PI*(7/8)),s=e;s.save();try{s.fillStyle=s.strokeStyle,s.moveTo(t.x,t.y),s.beginPath(),s.lineTo(t.x+o*Math.cos(i),t.y+o*Math.sin(i)),s.lineTo(t.x+o*Math.cos(a),t.y+o*Math.sin(a)),s.lineTo(t.x,t.y),s.fill()}finally{s.restore()}}function a(e,t){var n=o(e,t.center,t.maxRadius,t.minRadius,t.orientation,t.startAngle,t.sweepAngle);t.beginDecoration&&"ARROW_HEAD"===t.beginDecoration&&i(e,n[0],t.beginTangentAngle,12),t.endDecoration&&"ARROW_HEAD"===t.endDecoration&&i(e,n[1],t.endTangentAngle,12)}function s(e,t,n){e.save();try{e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke()}finally{e.restore()}}function c(e,t){s(e,t.firstPoint,t.lastPoint),"ARROW_HEAD"===t.beginDecoration&&i(e,t.firstPoint,t.beginTangentAngle,12),"ARROW_HEAD"===t.endDecoration&&i(e,t.lastPoint,t.endTangentAngle,12)}function l(e,t){u.rendererLogger.debug("draw "+t.type+" symbol");var n=e;n.save();try{if(n.lineWidth=t.width,n.strokeStyle=t.color,t.elementType)switch(t.elementType){case d.shape:l(n,t.candidates[t.selectedCandidateIndex]);break;case d.table:t.lines.forEach(function(e){return l(n,e)});break;case d.line:s(n,t.data.p1,t.data.p2);break;default:u.rendererLogger.error(t.elementType+" not implemented")}else switch(t.type){case d.ellipse:a(n,t);break;case d.line:c(n,t);break;case d.recognizedShape:t.primitives.forEach(function(e){return l(n,e)});break;default:u.rendererLogger.error(t.type+" not implemented")}}finally{n.restore()}}Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeSymbols=void 0,t.drawLine=s,t.drawShapeSymbol=l;var u=n(0),d=t.ShapeSymbols={table:"table",shape:"shape",recognizedShape:"recognizedShape",ellipse:"ellipse",line:"line"}},function(e,t,n){"use strict";var r=n(24);t.a=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r.a.hasOwnProperty(t)?{space:r.a[t],local:e}:e}},function(e,t,n){"use strict";n.d(t,"b",function(){return r});var r="http://www.w3.org/1999/xhtml";t.a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(e,t,n){"use strict";function r(){}t.a=function(e){return null==e?r:function(){return this.querySelector(e)}}},function(e,t,n){"use strict";t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(e,t,n){"use strict";function r(e,t,n){return e=o(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function o(e,t,n){return function(r){var o=u;u=r;try{e.call(this,this.__data__,t,n)}finally{u=o}}}function i(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function a(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?t.length=o:delete this.__on}}}function s(e,t,n){var i=l.hasOwnProperty(e.type)?r:o;return function(r,o,a){var s,c=this.__on,l=i(t,o,a);if(c)for(var u=0,d=c.length;u<d;++u)if((s=c[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t);this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},c?c.push(s):this.__on=[s]}}function c(e,t,n,r){var o=u;e.sourceEvent=u,u=e;try{return t.apply(n,r)}finally{u=o}}n.d(t,"c",function(){return u}),t.a=c;var l={},u=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(l={mouseenter:"mouseover",mouseleave:"mouseout"})}t.b=function(e,t,n){var r,o,c=i(e+""),l=c.length;{if(!(arguments.length<2)){for(u=t?s:a,null==n&&(n=!1),r=0;r<l;++r)this.each(u(c[r],t,n));return this}var u=this.node().__on;if(u)for(var d,f=0,p=u.length;f<p;++f)for(r=0,d=u[f];r<l;++r)if((o=c[r]).type===d.type&&o.name===d.name)return d.value}}},function(e,t,n){"use strict";var r=n(27);t.a=function(){for(var e,t=r.c;e=t.sourceEvent;)t=e;return t}},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,a=[],s=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+a[l];d+=l<20?1518500249+(o&i|~o&s):l<40?1859775393+(o^i^s):l<60?(o&i|o&s|i&s)-1894007588:(o^i^s)-899497514,c=s,s=i,i=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(s),t.HmacSHA1=o._createHmacHelper(s)}(),e.SHA1})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(13))}(0,function(e){return function(){function t(){return a.create.apply(a,arguments)}var n=e,r=n.lib,o=r.Hasher,i=n.x64,a=i.Word,s=i.WordArray,c=n.algo,l=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=t()}();var d=c.SHA512=o.extend({_doReset:function(){this._hash=new s.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],c=n[5],d=n[6],f=n[7],p=r.high,g=r.low,h=o.high,v=o.low,m=i.high,y=i.low,b=a.high,x=a.low,_=s.high,E=s.low,S=c.high,w=c.low,P=d.high,k=d.low,R=f.high,C=f.low,T=p,L=g,M=h,A=v,O=m,I=y,z=b,B=x,D=_,N=E,j=S,H=w,X=P,W=k,U=R,Y=C,G=0;G<80;G++){var F=u[G];if(G<16)var K=F.high=0|e[t+2*G],V=F.low=0|e[t+2*G+1];else{var J=u[G-15],q=J.high,Z=J.low,Q=(q>>>1|Z<<31)^(q>>>8|Z<<24)^q>>>7,$=(Z>>>1|q<<31)^(Z>>>8|q<<24)^(Z>>>7|q<<25),ee=u[G-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=u[G-7],ae=ie.high,se=ie.low,ce=u[G-16],le=ce.high,ue=ce.low,V=$+se,K=Q+ae+(V>>>0<$>>>0?1:0),V=V+oe,K=K+re+(V>>>0<oe>>>0?1:0),V=V+ue,K=K+le+(V>>>0<ue>>>0?1:0);F.high=K,F.low=V}var de=D&j^~D&X,fe=N&H^~N&W,pe=T&M^T&O^M&O,ge=L&A^L&I^A&I,he=(T>>>28|L<<4)^(T<<30|L>>>2)^(T<<25|L>>>7),ve=(L>>>28|T<<4)^(L<<30|T>>>2)^(L<<25|T>>>7),me=(D>>>14|N<<18)^(D>>>18|N<<14)^(D<<23|N>>>9),ye=(N>>>14|D<<18)^(N>>>18|D<<14)^(N<<23|D>>>9),be=l[G],xe=be.high,_e=be.low,Ee=Y+ye,Se=U+me+(Ee>>>0<Y>>>0?1:0),Ee=Ee+fe,Se=Se+de+(Ee>>>0<fe>>>0?1:0),Ee=Ee+_e,Se=Se+xe+(Ee>>>0<_e>>>0?1:0),Ee=Ee+V,Se=Se+K+(Ee>>>0<V>>>0?1:0),we=ve+ge,Pe=he+pe+(we>>>0<ve>>>0?1:0);U=X,Y=W,X=j,W=H,j=D,H=N,N=B+Ee|0,D=z+Se+(N>>>0<B>>>0?1:0)|0,z=O,B=I,O=M,I=A,M=T,A=L,L=Ee+we|0,T=Se+Pe+(L>>>0<Ee>>>0?1:0)|0}g=r.low=g+L,r.high=p+T+(g>>>0<L>>>0?1:0),v=o.low=v+A,o.high=h+M+(v>>>0<A>>>0?1:0),y=i.low=y+I,i.high=m+O+(y>>>0<I>>>0?1:0),x=a.low=x+B,a.high=b+z+(x>>>0<B>>>0?1:0),E=s.low=E+N,s.high=_+D+(E>>>0<N>>>0?1:0),w=c.low=w+H,c.high=S+j+(w>>>0<H>>>0?1:0),k=d.low=k+W,d.high=P+X+(k>>>0<W>>>0?1:0),C=f.low=C+Y,f.high=R+U+(C>>>0<Y>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});n.SHA512=o._createHelper(d),n.HmacSHA512=o._createHmacHelper(d)}(),e.SHA512})},function(e,t,n){"use strict";function r(e){return e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result&&e.rawResults.exports.result.results&&e.rawResults.exports.result.results.length>0?e.rawResults.exports.result.results.map(function(e){var t={};return Object.keys(e).includes("root")?t[""+e.type]=e.root:t[""+e.type]=e.value,t}).reduce(function(e,t){return Object.assign(e,t)},{}):{}}Object.defineProperty(t,"__esModule",{value:!0}),t.extractExports=r;n(0)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){return("https"===e.recognitionParams.server.scheme?"wss":"ws")+"://"+e.recognitionParams.server.host+t}function i(e,t,n,r){var i=t.recognitionContexts[0],a=x.updateRecognitionPositions(t,i.model.lastPositions);a.url=o(t.editor.configuration,e),a.reconnect=r;var s=v.destructurePromise();return a.initPromise=s.promise,u.recognizerLogger.debug("Opening the websocket for context ",t),a.websocketCallback=n(s,a),a.websocket=g.openWebSocket(a),a.initPromise.then(function(e){return u.recognizerLogger.debug("Init over",e),e})}function a(e,t,n,r){for(var o=arguments.length,i=Array(o>4?o-4:0),s=4;s<o;s++)i[s-4]=arguments[s];x.shouldAttemptImmediateReconnect(t)&&t.reconnect?(u.recognizerLogger.info("Attempting a retry",t.currentReconnectionCount),t.reconnect(t,n,function(o,s){o?(u.recognizerLogger.error("Failed retry",o),a.apply(void 0,[e,t,n,r].concat(i))):e.apply(void 0,[t,s,r].concat(i))})):r("Unable to reconnect",n)}function s(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e.initPromise.then(function(){u.recognizerLogger.trace("Init was done. Sending message");var n=t.apply(void 0,r);if(n){g.send(e,n);var o=e.recognitionContexts[0].model.lastPositions;o&&x.updateRecognitionPositions(e,o)}else u.recognizerLogger.warn("empty message")})}function c(e,t,n){var r=y.clearModel(t),o=x.updateRecognitionPositions(e,r.lastPositions);if(o&&o.websocket){delete o.instanceId;try{g.send(o,{type:"reset"})}catch(e){o.websocketCallback(v.destructurePromise(),o,t)}}n(void 0,r)}function l(e,t,n){var r={model:t,callback:function(e,r){return _(t,e,r,n)}},o=e;e.initPromise.then(function(){return o.recognitionContexts[0]=r,o}).then(function(e){return g.close(e,1e3,x.CLOSE_RECOGNIZER_MESSAGE)})}Object.defineProperty(t,"__esModule",{value:!0}),t.close=void 0,t.init=i,t.retry=a,t.sendMessage=s,t.clear=c;var u=n(0),d=n(2),f=function(e){return e&&e.__esModule?e:{default:e}}(d),p=n(33),g=r(p),h=n(134),v=r(h),m=n(3),y=r(m),b=n(5),x=r(b),_=function(e,t,n,r){return n&&"close"===n.type?r(t,e,f.default.EventType.CHANGED):r(t,e)};t.close=l},function(e,t,n){"use strict";function r(e){var t=e;t.pingLostCount++,t.pingLostCount>t.maxPingLost?e.close(1e3,"PING_LOST"):t.readyState<=1&&setTimeout(function(){t.readyState<=1&&(t.send(JSON.stringify({type:"ping"})),r(t))},t.pingDelay)}function o(e,t){var n=t.editor.configuration.recognitionParams.server.websocket,r=e;r.start=new Date,r.autoReconnect=n.autoReconnect,r.maxRetryCount=n.maxRetryCount,r.pingEnabled=n.pingEnabled,r.pingDelay=n.pingDelay,r.maxPingLost=n.maxPingLostCount,r.pingLostCount=0,r.recognizerContext=t}function i(e){var t=void 0;try{t=new WebSocket(e.url)}catch(e){c.recognizerLogger.error("Unable to open websocket, Check the host and your connectivity")}return o(t,e),t.pingEnabled&&r(t),t.onopen=function(t){c.recognizerLogger.trace("onOpen"),e.websocketCallback(t)},t.onclose=function(n){c.recognizerLogger.trace("onClose",new Date-t.start),e.websocketCallback(n)},t.onerror=function(t){c.recognizerLogger.trace("onError"),e.websocketCallback(t)},t.onmessage=function(n){if(c.recognizerLogger.trace("onMessage"),t.pingLostCount=0,"pong"!==JSON.parse(n.data).type){var r={type:n.type,data:JSON.parse(n.data)};e.websocketCallback(r)}},t}function a(e,t){var n=e;n.idle=!1;var r=n.websocket;if(!(r.readyState<=1))throw u.LOST_CONNEXION_MESSAGE;r.send(JSON.stringify(t)),c.recognizerLogger.debug(t.type+" message sent",t)}function s(e,t,n){var r=e.websocket;r&&r.readyState<2&&r.close(t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.openWebSocket=i,t.send=a,t.close=s;var c=n(0),l=n(5),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l)},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t){var n=this;r(this,e),this.toJSON=function(e){if("string"!=typeof e)return console.error("Need a CSS string but given ",void 0===e?"undefined":o(e),e),"Not a valid CSS..!";var t={},r=void 0,i=void 0,a=void 0;try{e.split("{").forEach(function(e){if(i=e.trim())if(-1===i.indexOf("}"))t[i]={},r=i;else{i.substring(0,i.indexOf("}")).split(";").forEach(function(e){(a=e.split(":"))&&2===a.length&&(t[r][a[0].trim().replace(/^\"|\"$/g,"")]=n._trimSemiColon(a[1].trim().replace(/^\"|\"$/g,"")))});try{(r=i.split("}")[1].trim())&&(t[r]={})}catch(e){}}})}catch(e){return"Not a valid CSS..!"}return t},this.toCSS=function(e){if("object"!==(void 0===e?"undefined":o(e)))return console.error("Need a JSON object but given ",void 0===e?"undefined":o(e),e),"Not a valid JSON..!";var t="";try{for(var n in e)if(e.hasOwnProperty(n)){t+=n+" {\n";for(var r in e[n])e[n].hasOwnProperty(r)&&(t+=r+": "+e[n][r]+";\n");t+="}\n"}}catch(e){return"Not a valid JSON..!"}return t},this._trimSemiColon=function(e){return";"===e.slice(-1)?e.slice(0,n.length-1):e}};t.default=i},function(e,t,n){"use strict";e.exports=n(0).default}])})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){for(var n=e,r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];o.forEach(function(r){switch(r){case K.default.EventType.RENDERED:break;case K.default.EventType.UNDO:case K.default.EventType.REDO:case K.default.EventType.CLEAR:case K.default.EventType.CONVERT:case K.default.EventType.EXPORT:e.callbacks.forEach(function(t){return t.call(e.domElement,r)});break;case K.default.EventType.LOADED:case K.default.EventType.CHANGED:e.callbacks.forEach(function(t){return t.call(e.domElement,r,{initialized:e.initialized,canUndo:e.canUndo,canRedo:e.canRedo,canClear:e.canClear,isEmpty:e.isEmpty,possibleUndoCount:e.possibleUndoCount,undoStackIndex:e.undoStackIndex,canConvert:e.canConvert,canExport:e.canExport})});break;case K.default.EventType.EXPORTED:window.clearTimeout(n.notifyTimer),n.notifyTimer=window.setTimeout(function(){e.callbacks.forEach(function(t){return t.call(e.domElement,r,{exports:e.exports})})},n.configuration.processDelay);break;case K.default.EventType.ERROR:e.callbacks.forEach(function(n){return n.call(e.domElement,r,t)});break;case K.default.EventType.IDLE:e.callbacks.forEach(function(t){return t.call(e.domElement,r,{idle:e.idle})});break;default:S.editorLogger.debug("No valid trigger configured for "+r)}})}function s(e,t,n,r,o){for(var i=arguments.length,a=Array(i>5?i-5:0),s=5;s<i;s++)a[s-5]=arguments[s];e&&U.isResetRequired(n,r)?(S.editorLogger.debug("Reset is needed"),e(n,r,function(e,r){for(var i=arguments.length,s=Array(i>2?i-2:0),c=2;c<i;c++)s[c-2]=arguments[c];e?o.apply(void 0,[e,r].concat(s)):t.apply(void 0,[n,r,o].concat(a))})):t.apply(void 0,[n,r,o].concat(a))}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.configuration.triggers[t];return!(!e.recognizer||!e.recognizer.getInfo().availableTriggers[t].includes(n))||(S.editorLogger.error(n+" is not a valid trigger for "+t),!1)}function l(e,t){for(var n=e,r=t,o=arguments.length,i=Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];S.editorLogger.debug("model changed callback on "+i+" event(s)",t),r.creationTime===e.model.creationTime&&(r.rawStrokes.length===e.model.rawStrokes.length&&r.lastPositions.lastSentPosition>=e.model.lastPositions.lastReceivedPosition?(n.model=O.mergeModels(n.model,r),(O.needRedraw(n.model)||i.includes(K.default.EventType.RENDERED))&&e.renderer.drawModel(e.rendererContext,n.model,e.stroker)):(n.model=r,e.renderer.drawModel(e.rendererContext,n.model,e.stroker)),a.apply(void 0,[e,void 0].concat(i))),"TEXT"===e.configuration.recognitionParams.type&&"V4"===e.configuration.recognitionParams.apiVersion&&"REST"!==e.configuration.recognitionParams.protocol&&e.configuration.recognitionParams.v4.text.mimeTypes.includes(K.default.Exports.JIIX)&&e.configuration.recognitionParams.v4.text.smartGuide&&f(n,r.exports),O.extractPendingStrokes(t).length>0&&!e.recognizer.addStrokes&&e.configuration.triggers.exportContent!==K.default.Trigger.DEMAND&&g(e,t)}function u(e,t,n){for(var r=arguments.length,o=Array(r>3?r-3:0),s=3;s<r;s++)o[s-3]=arguments[s];var c=e,u=function(t,n){for(var r=arguments.length,s=Array(r>2?r-2:0),u=2;u<r;u++)s[u-2]=arguments[u];t?(S.editorLogger.error("Error while firing the recognition",t.stack||t),"Wrong application key"===t.message||"Invalid HMAC"===t.message||t.error&&t.error.result&&t.error.result.error&&("InvalidApplicationKeyException"===t.error.result.error||"InvalidHMACSignatureException"===t.error.result.error)?c.error.innerText=K.default.Error.WRONG_CREDENTIALS:c.error.innerText=K.default.Error.NOT_REACHABLE,"Session is too old. Max Session Duration Reached"===t.message&&U.canReconnect(e.recognizerContext)?S.editorLogger.info("Reconnection is available",t.stack||t):(c.error.style.display="initial",a.apply(void 0,[e,t,K.default.EventType.ERROR].concat(s)))):l.apply(void 0,[c,n].concat(i([].concat(o,s).filter(function(e,t,n){return t===n.indexOf(e)}))))};S.editorLogger.debug("recognition callback"),e.undoRedoManager.updateModel&&!t?e.undoRedoManager.updateModel(e.undoRedoContext,n,u):u.apply(void 0,[t,n].concat(o))}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.configuration.triggers.addStrokes;e.recognizer&&e.recognizer.addStrokes&&e.recognizerContext.initPromise.then(function(){c(e,"addStrokes",n)&&s(e.recognizer.reset,e.recognizer.addStrokes,e.recognizerContext,t,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}function f(e,t){e.smartGuide=G.launchSmartGuide(e.smartGuide,t)}function p(e,t,n){e.recognizer&&e.recognizer.pointerEvents&&e.recognizerContext.initPromise.then(function(){e.recognizer.pointerEvents(e.recognizerContext,t,n,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}function g(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.configuration.triggers.exportContent;e.recognizer&&e.recognizer.export_&&e.recognizerContext.initPromise.then(function(){if(c(e,"exportContent",r)){var o=e;window.clearTimeout(e.exportTimer),o.exportTimer=window.setTimeout(function(){s(e.recognizer.reset,e.recognizer.export_,e.recognizerContext,t,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))},n)},r===K.default.Trigger.QUIET_PERIOD?e.configuration.triggerDelay:0)}})}function h(e,t,n){e.recognizer&&e.recognizer.import_&&e.recognizerContext.initPromise.then(function(){e.recognizer.import_(e.recognizerContext,t,n,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}function v(e,t,n){e.recognizer&&e.recognizer.convert&&e.recognizerContext.initPromise.then(function(){e.recognizer.convert(e.recognizerContext,t,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))},n)})}function m(e,t){e.recognizer&&e.recognizer.resize&&(e.recognizerContext.initPromise.then(function(){var n=e;window.clearTimeout(e.resizeTimer),n.resizeTimer=window.setTimeout(function(){e.recognizer.resize(e.recognizerContext,t,e.domElement,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})},e.configuration.resizeTriggerDelay)}),G.resize(e.smartGuide))}function y(e,t){e.recognizer&&e.recognizer.waitForIdle&&e.recognizerContext.initPromise.then(function(){e.recognizer.waitForIdle(e.recognizerContext,t,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}function b(e,t){e.recognizer&&e.recognizer.setPenStyle&&e.recognizerContext.initPromise.then(function(){e.recognizer.setPenStyle(e.recognizerContext,t,e.penStyle,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}function x(e,t){e.recognizer&&e.recognizer.setPenStyleClasses&&e.recognizerContext.initPromise.then(function(){e.recognizer.setPenStyleClasses(e.recognizerContext,t,e.penStyleClasses,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}function _(e,t){e.recognizer&&e.recognizer.setTheme&&e.recognizerContext.initPromise.then(function(){e.recognizer.setTheme(e.recognizerContext,t,e.theme,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})})}Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=void 0;var E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=n(0),w=n(59),P=r(w),k=n(15),R=r(k),C=n(16),T=r(C),L=n(17),M=r(L),A=n(3),O=r(A),I=n(53),z=r(I),B=n(142),D=r(B),N=n(143),j=r(N),H=n(144),X=r(H),W=n(5),U=r(W),Y=n(145),G=r(Y),F=n(2),K=function(e){return e&&e.__esModule?e:{default:e}}(F),V=n(155);t.Editor=function(){function e(t,n,r,i,a){o(this,e),this.domElement=t,this.domElement.classList.add("ms-editor"),this.loader=document.createElement("div"),this.loader.classList.add("loader"),this.loader=this.domElement.appendChild(this.loader),this.error=document.createElement("div"),this.error.classList.add("error-msg"),this.error=this.domElement.appendChild(this.error),this.exportTimer=void 0,this.resizeTimer=void 0,this.notifyTimer=void 0,this.innerBehaviors=P.overrideDefaultBehaviors(a),this.configuration=n,this.smartGuide=G.createSmartGuide(this),this.localTheme="",this.theme=i,this.penStyle=r,this.penStyleClasses="",this.domElement.editor=this}return E(e,[{key:"getStats",value:function(){return j.computeStats(this.model)}},{key:"pointerDown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pen",n=arguments[2];S.editorLogger.trace("Pointer down",e),window.clearTimeout(this.notifyTimer),window.clearTimeout(this.exportTimer),this.model=O.initPendingStroke(this.model,e,Object.assign({pointerType:t,pointerId:n},this.theme.ink,this.localPenStyle)),this.renderer.drawCurrentStroke(this.rendererContext,this.model,this.stroker)}},{key:"pointerMove",value:function(e){S.editorLogger.trace("Pointer move",e),this.model=O.appendToPendingStroke(this.model,e),this.renderer.drawCurrentStroke(this.rendererContext,this.model,this.stroker)}},{key:"pointerUp",value:function(e){S.editorLogger.trace("Pointer up",e),this.model=O.endPendingStroke(this.model,e,this.penStyle),this.renderer.drawModel(this.rendererContext,this.model,this.stroker),this.recognizer.addStrokes?d(this,this.model):u(this,void 0,this.model)}},{key:"removeStroke",value:function(e){this.model.strokeGroups.forEach(function(t){var n=t.strokes.map(function(e){return JSON.stringify(e)}),r=n.indexOf(JSON.stringify(e));-1!==r&&t.strokes.splice(r,1)});var t=this.model.rawStrokes.map(function(e){return JSON.stringify(e)}),n=t.indexOf(JSON.stringify(e));-1!==n&&this.model.rawStrokes.splice(n,1),this.renderer.drawModel(this.rendererContext,this.model,this.stroker),u(this,void 0,this.model),"DEMAND"!==this.configuration.triggers.exportContent&&g(this,this.model)}},{key:"reDraw",value:function(e,t){var n=this;e.forEach(function(e){O.addStroke(n.model,e)}),t.forEach(function(e){e.strokes.forEach(function(t){O.addStrokeToGroup(n.model,t,e.penStyle)})}),this.renderer.drawModel(this.rendererContext,this.model,this.stroker),u(this,void 0,this.model)}},{key:"waitForIdle",value:function(){a(this,void 0,K.default.EventType.IDLE),y(this,this.model)}},{key:"undo",value:function(){var e=this;S.editorLogger.debug("Undo current model",this.model),a(this,void 0,K.default.EventType.UNDO),this.undoRedoManager.undo(this.undoRedoContext,this.model,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];l.apply(void 0,[e,n].concat(o))})}},{key:"redo",value:function(){var e=this;S.editorLogger.debug("Redo current model",this.model),a(this,void 0,K.default.EventType.REDO),this.undoRedoManager.redo(this.undoRedoContext,this.model,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];l.apply(void 0,[e,n].concat(o))})}},{key:"clear",value:function(){var e=this;S.editorLogger.debug("Clear current model",this.model),a(this,void 0,K.default.EventType.CLEAR),this.recognizer.clear(this.recognizerContext,this.model,function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];u.apply(void 0,[e,t,n].concat(o))})}},{key:"convert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DIGITAL_EDIT";this.canConvert&&(a(this,void 0,K.default.EventType.CONVERT),v(this,this.model,e))}},{key:"export_",value:function(e){this.canExport&&(a(this,void 0,K.default.EventType.EXPORT),g(this,this.model,e,K.default.Trigger.DEMAND))}},{key:"import_",value:function(e,t){a(this,void 0,K.default.EventType.IMPORT),h(this,this.model,e instanceof Blob?e:new Blob([e],{type:t}))}},{key:"pointerEvents",value:function(e){p(this,this.model,e)}},{key:"resize",value:function(){S.editorLogger.debug("Resizing editor"),this.renderer.resize(this.rendererContext,this.model,this.stroker,this.configuration.renderingParams.minHeight,this.configuration.renderingParams.minWidth),m(this,this.model)}},{key:"setThemeForFont",value:function(e){var t=!Object.keys(K.default.Languages).includes(e),n="hy_AM"===e,r=t||n?K.default.Languages.default:K.default.Languages[e],o=t||n?"1.2":"1.8";this.theme={".text":{"font-family":r,"line-height":o}}}},{key:"configuration",set:function(e){this.loader.style.display="initial",this.error.style.display="none",this.innerConfiguration=R.overrideDefaultConfiguration(e),this.setThemeForFont(this.innerConfiguration.recognitionParams.v4.lang),this.behavior=this.behaviors.getBehaviorFromConfiguration(this.behaviors,this.innerConfiguration)},get:function(){return this.innerConfiguration}},{key:"penStyle",set:function(e){this.innerPenStyle=T.overrideDefaultPenStyle(e),this.localPenStyle=this.innerPenStyle,b(this,this.model)},get:function(){return this.innerPenStyle}},{key:"penStyleClasses",set:function(e){this.innerPenStyleClasses=e,this.localPenStyle=this.theme["."+this.innerPenStyleClasses],x(this,this.model)},get:function(){return this.innerPenStyleClasses}},{key:"theme",set:function(e){this.innerTheme=M.overrideDefaultTheme(e),_(this,this.model)},get:function(){return this.innerTheme}},{key:"behaviors",get:function(){return this.innerBehaviors}},{key:"behavior",set:function(e){e&&(this.grabber&&this.grabber.detach(this.domElement,this.grabberContext),this.innerBehavior=e,this.renderer=this.innerBehavior.renderer,this.recognizer=this.innerBehavior.recognizer,this.grabberContext=this.grabber.attach(this.domElement,this))},get:function(){return this.innerBehavior}},{key:"recognizer",set:function(e){var t=this;this.undoRedoContext=z.createUndoRedoContext(this.configuration),this.undoRedoManager=D;var n=function(n){t.innerRecognizer=e,t.innerRecognizer&&(t.recognizerContext=U.createEmptyRecognizerContext(t),t.innerRecognizer.undo&&t.innerRecognizer.redo&&t.innerRecognizer.clear&&(t.undoRedoContext=t.recognizerContext,t.undoRedoManager=t.innerRecognizer),t.innerRecognizer.init(t.recognizerContext,n,function(e,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];S.editorLogger.debug("Recognizer initialized",n),t.loader.style.display="none",u.apply(void 0,[t,e,n].concat(o))}))};e&&(this.innerRecognizer?this.innerRecognizer.close(this.recognizerContext,this.model,function(e,r){for(var o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];S.editorLogger.info("Recognizer closed"),u.apply(void 0,[t,e,r].concat(i)),n(O.clearModel(r))}):(this.model=O.createModel(this.configuration),n(this.model)))},get:function(){return this.innerRecognizer}},{key:"renderer",set:function(e){e&&(this.innerRenderer&&this.innerRenderer.detach(this.domElement,this.rendererContext),this.innerRenderer=e,this.innerRenderer&&(this.rendererContext=this.innerRenderer.attach(this.domElement,this.configuration.renderingParams.minHeight,this.configuration.renderingParams.minWidth)))},get:function(){return this.innerRenderer}},{key:"grabber",get:function(){return this.behavior?this.behavior.grabber:void 0}},{key:"stroker",get:function(){return this.behavior?this.behavior.stroker:void 0}},{key:"callbacks",get:function(){return this.behavior?this.behavior.callbacks:void 0}},{key:"png",get:function(){return X.getImage(this.model,this.stroker)}},{key:"initialized",get:function(){return!!this.recognizerContext&&this.recognizerContext.initialized}},{key:"idle",get:function(){return this.recognizerContext.idle}},{key:"canUndo",get:function(){return this.undoRedoContext.canUndo}},{key:"canRedo",get:function(){return this.undoRedoContext.canRedo}},{key:"isEmpty",get:function(){return this.recognizerContext.isEmpty}},{key:"canClear",get:function(){return this.canUndo&&this.model.rawStrokes.length>0}},{key:"canConvert",get:function(){return this.canUndo&&this.canClear&&this.recognizer&&this.recognizer.convert}},{key:"possibleUndoCount",get:function(){return this.recognizerContext.possibleUndoCount}},{key:"undoStackIndex",get:function(){return this.recognizerContext.undoStackIndex}},{key:"canExport",get:function(){return this.canUndo&&this.canClear&&this.recognizer&&this.recognizer.getInfo().availableTriggers.exportContent.includes(K.default.Trigger.DEMAND)}},{key:"exports",get:function(){return this.model?this.model.exports:void 0}},{key:"eastereggs",get:function(){return{inkImporter:V.inkImporter}}}]),e}()},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){return{type:"canvas",apiVersion:"V3"}}function i(e){if(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}return 1}function a(e){return i(document.createElement("canvas"))}function s(e,t){var n=document,r=n.createElement("canvas");return r.classList.add(t),r.classList.add("ms-canvas"),e.appendChild(r),h.rendererLogger.debug("canvas created",r),r}function c(e){return[e.renderingCanvas,e.capturingCanvas].forEach(function(t){var n=t.parentNode,r=n.clientWidth<e.minWidth?e.minWidth:n.clientWidth,o=n.clientHeight<e.minHeight?e.minHeight:n.clientHeight;t.width=r*e.pixelRatio,t.height=o*e.pixelRatio,t.style.width=r+"px",t.style.height=o+"px",t.getContext("2d").scale(e.pixelRatio,e.pixelRatio),h.rendererLogger.debug("canvas size changed",t)}),e}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h.rendererLogger.debug("attach renderer",e);var r=a(e),o=(0,b.getMusicClefElements)();o.forEach(function(t){return e.appendChild(t)});var i=s(e,"ms-rendering-canvas"),l=s(e,"ms-capture-canvas");return c({pixelRatio:r,minHeight:t,minWidth:n,renderingCanvas:i,renderingCanvasContext:i.getContext("2d"),capturingCanvas:l,capturingCanvasContext:l.getContext("2d"),resources:o})}function u(e,t){h.rendererLogger.debug("detach renderer",e),t.resources.forEach(function(t){return e.removeChild(t)}),e.removeChild(t.renderingCanvas),e.removeChild(t.capturingCanvas)}function d(e,t,n){return this.drawModel(c(e),t,n)}function f(e,t,n){var r=t.elementType?t.elementType:t.type;h.rendererLogger.trace("attempting to draw "+r+" symbol"),"stroke"===r?(0,v.drawStroke)(e,t,n):m.TextSymbols[r]?(0,m.drawTextSymbol)(e,t):y.ShapeSymbols[r]?(0,y.drawShapeSymbol)(e,t):b.MusicSymbols[r]?(0,b.drawMusicSymbol)(e,t):h.rendererLogger.warn("impossible to draw "+r+" symbol")}function p(e,t,n){return e.capturingCanvasContext.clearRect(0,0,e.capturingCanvas.width,e.capturingCanvas.height),h.rendererLogger.trace("drawing current stroke ",t.currentStroke),(0,v.drawStroke)(e.capturingCanvasContext,t.currentStroke,n),t}function g(e,t,n){e.renderingCanvasContext.clearRect(0,0,e.renderingCanvas.width,e.renderingCanvas.height);var o=[].concat(r(t.defaultSymbols));return t.recognizedSymbols?(o.push.apply(o,r(t.recognizedSymbols)),o.push.apply(o,r(_.extractPendingStrokes(t)))):o.push.apply(o,r(t.rawStrokes)),o.forEach(function(t){return f(e.renderingCanvasContext,t,n)}),e.capturingCanvasContext.clearRect(0,0,e.capturingCanvas.width,e.capturingCanvas.height),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=o,t.attach=l,t.detach=u,t.resize=d,t.drawCurrentStroke=p,t.drawModel=g;var h=n(0),v=n(61),m=n(62),y=n(22),b=n(37),x=n(3),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(x)},function(e,t,n){"use strict";function r(e,t){var n=document,r=n.createElement("img");return r.dataset.clef=e,r.src=t,r.style.display="none",r}function o(){return Object.keys(u).map(function(e){return r(e,"data:image/svg+xml,"+u[e].svg)})}function i(e,t){for(var n=0;n<t.count;n++){var r={x:0,y:t.top+n*t.gap},o={x:e.canvas.width,y:t.top+n*t.gap};(0,l.drawLine)(e,r,o)}}function a(e,t){e.drawImage(e.canvas.parentElement.querySelector("img[data-clef="+t.value.symbol+"]"),t.boundingBox.x,t.boundingBox.y,t.boundingBox.width,t.boundingBox.height)}function s(e,t){switch(c.rendererLogger.debug("draw "+t.type+" symbol"),t.type){case d.clef:a(e,t);break;case d.staff:i(e,t);break;default:c.rendererLogger.error(t.type+" not implemented")}}Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSymbols=t.MusicClefs=void 0,t.getMusicClefElements=o,t.drawMusicSymbol=s;var c=n(0),l=n(22),u=t.MusicClefs={F:{svg:'<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="18" height="20"><g transform="translate(6.600000e-3,3.125356e-3)"><path d="M17.3 3.1 C17.3 3.5 17.1 3.8 16.8 4.1 C16.5 4.4 15.9 4.5 15.5 4.3 C15 4.1 14.7 3.7 14.7 3.2 C14.6 2.8 14.8 2.5 15 2.2 C15.3 1.9 15.7 1.8 16 1.8 C16.4 1.8 16.8 2 17 2.3 C17.2 2.5 17.3 2.8 17.3 3.1 z"/><path d="M17.3 8.9 C17.3 9.3 17.1 9.7 16.8 9.9 C16.5 10.3 15.9 10.3 15.5 10.2 C15 10 14.7 9.5 14.7 9.1 C14.6 8.7 14.8 8.3 15 8 C15.3 7.8 15.7 7.6 16 7.6 C16.5 7.7 17 8 17.2 8.4 C17.2 8.6 17.3 8.8 17.3 8.9 z"/><path d="M13 7.2 C13 10 11.8 12.7 9.8 14.7 C7.3 17.2 4 18.8 0.7 19.8 C0.3 20.1 -0.4 19.8 0.3 19.4 C1.6 18.8 3 18.3 4.2 17.5 C7 15.8 9.3 13.1 9.8 9.9 C10.1 8 10.1 5.9 9.6 4 C9.2 2.6 8.2 1.1 6.7 0.9 C5.3 0.7 3.7 1.2 2.7 2.2 C2.5 2.4 2 3.2 2 4 C2.6 3.6 2.6 3.6 3.1 3.4 C4.2 2.9 5.7 3.6 6 4.9 C6.3 6 6.1 7.5 5 8.1 C3.8 8.7 2 8.5 1.4 7.2 C0.3 5.3 0.9 2.6 2.6 1.2 C4.4 -0.3 7.1 -0.3 9.2 0.4 C11.4 1.3 12.7 3.5 12.9 5.8 C13 6.2 13 6.7 13 7.2 z"/></g></svg>',getBoundingBox:function(e,t,n){return{height:3*e,width:3*e*.9,x:t,y:n-e}}},C:{svg:'<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="18" height="25"><g transform="matrix(1,0,0,1.030698,-309.364,-543.8647)"><path d="M 325.9 546.8 C 325.8 548.7 324.7 550.7 322.8 551.5 C 321.1 552.1 319.1 552.2 317.6 551 C 316.6 550.2 316.2 548.4 317.3 547.5 C 318.3 546.5 320.4 547.4 320.3 548.9 C 320.7 549.9 318.5 550.5 319.7 551.3 C 321 551.6 322.3 550.5 322.6 549.3 C 323.1 547.5 323.1 545.6 322.7 543.8 C 322.4 542.9 321.9 541.5 320.7 541.9 C 319.2 542.2 318.3 543.8 317.9 545.1 C 317.6 543.2 316.4 541.5 315 540.2 C 315 544.1 315 548 315 551.9 L 314.1 551.9 C 314.1 543.9 314.1 535.7 314.1 527.7 L 315 527.7 C 315 531.5 315 535.5 315 539.4 C 316.4 538.1 317.6 536.4 317.8 534.5 C 318.3 535.9 319.3 537.5 321 537.8 C 322.2 537.8 322.5 536.3 322.8 535.4 C 323.1 533.7 323.1 531.8 322.6 530.1 C 322.2 529 320.9 528 319.6 528.3 C 318.6 529 320.6 529.6 320.3 530.6 C 320.5 532 318.8 533 317.6 532.3 C 316.3 531.6 316.4 529.7 317.4 528.8 C 318 528.1 319.3 527.7 320.3 527.7 C 321.2 527.7 321.8 527.7 322.6 528 C 324.6 528.7 325.7 530.7 325.9 532.7 C 326.2 534.9 324.9 537.3 322.8 538.2 C 321.5 538.7 319.9 538.3 318.8 537.3 C 318.7 538.3 318.2 539.2 317.7 539.9 C 318.1 540.6 318.6 541.8 318.8 542.1 C 320.1 540.9 322.5 540.8 323.8 542 C 325.2 543.1 326.1 545 325.9 546.8 z "/></g><g transform="matrix(1,0,0,1.030928,-309.364,-543.9805)"><path d="M 312.2 551.9 L 309.4 551.9 L 309.4 527.7 L 312.2 527.7 L 312.2 551.9 z "/></g></svg>',getBoundingBox:function(e,t,n){return{height:3*e,width:3*e*.72,x:t,y:n-1.5*e}}},G:{svg:'<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="15" height="40"><g><path d="m 12 3.4 c 0.3 3.1 -2 5.6 -4.1 7.6 -0.9 0.9 -0.2 0.1 -0.6 0.6 -0.1 -0.5 -0.3 -1.7 -0.3 -2.1 0.1 -2.6 2.3 -6.5 4.2 -7.9 0.3 0.6 0.6 0.6 0.8 1.8 z m 0.7 15.9 c -1.2 -0.9 -2.8 -1.1 -4.3 -0.9 -0.2 -1.2 -0.4 -2.5 -0.6 -3.7 2.4 -2.3 4.9 -4.9 5 -8.4 0.1 -2.2 -0.3 -4.6 -1.7 -6.4 C 9.5 0.1 8.3 2.1 7.4 3.3 c -1.5 2.6 -1.1 5.8 -0.6 8.6 -0.8 0.9 -1.9 1.7 -2.7 2.7 -2.4 2.3 -4.4 5.3 -4 8.7 0.2 3.3 2.6 6.3 5.9 7.1 1.2 0.3 2.6 0.3 3.8 0.1 0.2 2.2 1 4.5 0.1 6.7 -0.7 1.6 -2.8 2.9 -4.3 2.2 -0.6 -0.3 -0.1 -0.1 -0.5 -0.2 1.1 -0.3 2 -1 2.3 -1.5 0.8 -1.4 -0.4 -3.6 -2.2 -3.3 -2.3 0 -3.2 3.1 -1.7 4.6 1.3 1.5 3.8 1.3 5.4 0.3 1.8 -1.2 2 -3.5 1.8 -5.5 -0.1 -0.7 -0.4 -2.6 -0.4 -3.3 0.7 -0.2 0.2 -0.1 1.2 -0.4 2.7 -1 4.4 -4.2 3.6 -7 -0.3 -1.4 -1 -2.9 -2.3 -3.7 z m 0.6 5.7 c 0.2 2 -1.1 4.2 -3.1 4.9 -0.1 -0.8 -0.2 -1 -0.3 -1.4 -0.5 -2.4 -0.7 -4.9 -1.1 -7.3 1.6 -0.2 3.5 0.5 4 2.1 0.2 0.6 0.3 1.2 0.4 1.8 z m -5.1 5.1 c -2.5 0.1 -5 -1.6 -5.6 -4 -0.7 -2.1 -0.5 -4.5 0.8 -6.4 1.1 -1.7 2.6 -3 4 -4.5 0.2 1.1 0.4 2.2 0.5 3.3 -3 0.8 -5 4.6 -3.2 7.3 0.5 0.8 2 2.2 2.8 1.6 -1.1 -0.7 -2 -1.8 -1.8 -3.2 -0.1 -1.3 1.4 -2.9 2.7 -3.1 0.4 2.8 0.9 6 1.4 8.8 -0.5 0.1 -1 0.1 -1.5 0.1 z"/></g></svg>',getBoundingBox:function(e,t,n){return{height:7.5*e,width:7.5*e*.375,x:t,y:n-4.5*e}}}},d=t.MusicSymbols={accidental:"accidental",arpeggiate:"arpeggiate",bar:"bar",beam:"beam",clef:"clef",decoration:"decoration",dots:"dots",head:"head",ledgerLine:"ledgerLine",rest:"rest",staff:"staff",stem:"stem",tieOrSlur:"tieOrSlur",timeSignature:"timeSignature"}},function(e,t,n){"use strict";function r(e,t,n){var r=e.p*n;return[{x:e.x-Math.sin(t)*r,y:e.y+Math.cos(t)*r},{x:e.x+Math.sin(t)*r,y:e.y-Math.cos(t)*r}]}function o(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2,p:(t.p+e.p)/2}}function i(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}Object.defineProperty(t,"__esModule",{value:!0}),t.computeLinksPoints=r,t.computeMiddlePoint=o,t.computeAxeAngle=i},function(e,t,n){"use strict";var r=n(7);t.a=function(e){return"string"==typeof e?new r.a([[document.querySelector(e)]],[document.documentElement]):new r.a([[e]],r.c)}},function(e,t,n){"use strict";function r(){return[]}t.a=function(e){return null==e?r:function(){return this.querySelectorAll(e)}}},function(e,t,n){"use strict";var r=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var o=document.documentElement;if(!o.matches){var i=o.webkitMatchesSelector||o.msMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector;r=function(e){return function(){return i.call(this,e)}}}}t.a=r},function(e,t,n){"use strict";function r(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t.a=r;var o=n(43),i=n(7);t.b=function(){return new i.a(this._enter||this._groups.map(o.a),this._parents)},r.prototype={constructor:r,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},function(e,t,n){"use strict";t.a=function(e){return new Array(e.length)}},function(e,t,n){"use strict";function r(e){return function(){this.style.removeProperty(e)}}function o(e,t,n){return function(){this.style.setProperty(e,t,n)}}function i(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function a(e,t){return e.style.getPropertyValue(t)||Object(s.a)(e).getComputedStyle(e,null).getPropertyValue(t)}t.b=a;var s=n(26);t.a=function(e,t,n){return arguments.length>1?this.each((null==t?r:"function"==typeof t?i:o)(e,t,null==n?"":n)):a(this.node(),e)}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return E}function i(e,t){var n=e.editor.configuration,r={inputUnits:[{textInputType:"MULTI_LINE_TEXT",components:t.rawStrokes.map(function(e){return h.toJSON(e)})}]};Object.assign(r,{textParameter:n.recognitionParams.v3.textParameter}),l.recognizerLogger.debug("input.inputUnits[0].components size is "+r.inputUnits[0].components.length);var o={instanceId:e?e.instanceId:void 0,applicationKey:n.recognitionParams.server.applicationKey,textInput:JSON.stringify(r)};return n.recognitionParams.server.hmacKey&&(o.hmac=m.computeHmac(o.textInput,n.recognitionParams.server.applicationKey,n.recognitionParams.server.hmacKey)),p.updateModelSentPosition(t),o}function a(e,t,n){l.recognizerLogger.debug("Cdkv3RestTextRecognizer result callback",e);var r=p.updateModelReceivedPosition(e);r.rawResults.exports=t,r.exports=_.extractExports(e),l.recognizerLogger.debug("Cdkv3RestTextRecognizer model updated",r),n(void 0,r,d.default.EventType.EXPORTED,d.default.EventType.IDLE)}function s(e,t,n){b.postMessage("/api/v3.0/recognition/rest/text/doSimpleRecognition.json",e,t,i).then(function(e){return a(t,e,n)}).catch(function(e){return n(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.textRestV3Configuration=t.reset=t.clear=t.close=t.init=void 0;var c=n(8);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return c.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return c.close}}),Object.defineProperty(t,"clear",{enumerable:!0,get:function(){return c.clear}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return c.reset}}),t.getInfo=o,t.buildInput=i,t.export_=s;var l=n(0),u=n(2),d=function(e){return e&&e.__esModule?e:{default:e}}(u),f=n(3),p=r(f),g=n(6),h=r(g),v=n(9),m=r(v),y=n(14),b=r(y),x=n(48),_=r(x),E=t.textRestV3Configuration={types:[d.default.RecognitionType.TEXT],protocol:d.default.Protocol.REST,apiVersion:"V3",availableTriggers:{exportContent:[d.default.Trigger.QUIET_PERIOD,d.default.Trigger.DEMAND]}}},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],c=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)(function(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0})(n)&&(r<8&&(s[r]=e(t.pow(n,.5))),c[r]=e(t.pow(n,1/3)),r++),n++}();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var g=l[p-15],h=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,v=l[p-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[p]=h+l[p-7]+m+l[p-16]}var y=s&u^~s&d,b=r&o^r&i^o&i,x=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),E=f+_+y+c[p]+l[p],S=x+b;f=d,d=u,u=s,s=a+E|0,a=i,i=o,o=r,r=E+S|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256})},function(e,t,n){"use strict";function r(e){var t=void 0;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return t}function o(e){var t=[];return Object.keys(e).forEach(function(n){void 0!==e[n]&&"function"!=typeof e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}),t.join("&")}function i(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments[4],s=arguments[5],c="application/vnd.openxmlformats-officedocument.presentationml.presentation",u=i.editor.configuration,d=i;return new Promise(function(i,f){var p=new XMLHttpRequest;if(p.open(e,t,!0),p.withCredentials=!0,"V3"===a)p.setRequestHeader("Accept","application/json"),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");else if("V4"===a){switch(u.recognitionParams.type){case"TEXT":case"MATH":case"DIAGRAM":p.setRequestHeader("Accept","application/json,"+s)}p.setRequestHeader("applicationKey",u.recognitionParams.server.applicationKey),p.setRequestHeader("hmac",l.computeHmac(JSON.stringify(n),u.recognitionParams.server.applicationKey,u.recognitionParams.server.hmacKey)),p.setRequestHeader("Content-Type","application/json")}s===c&&(p.responseType="blob"),p.onerror=function(){f({msg:"Could not connect to "+t+" connection error",recoverable:!1})},p.onload=function(){p.status>=200&&p.status<300?i(s===c?p.response:r(p)):f(new Error(p.responseText))},p.onreadystatechange=function(){4===p.readyState&&p.status>=200&&p.status<300&&i(s===c?p.response:r(p))},d&&(d.idle=!1),"V4"===a?p.send(JSON.stringify(n)):p.send(n?o(n):void 0)}).then(function(e){return d&&(d.idle=!0),e})}function a(e,t,n){var r=t;return n&&(r+="?"+o(n)),i("GET",r,void 0,e)}function s(e,t,n,r,o){return i("POST",t,n,e,r,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.get=a,t.post=s;var c=n(9),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c)},function(e,t,n){"use strict";function r(e){return e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result&&e.rawResults.exports.result.textSegmentResult&&e.rawResults.exports.result.textSegmentResult.candidates?{CANDIDATES:e.rawResults.exports.result,TEXT:e.rawResults.exports.result.textSegmentResult.candidates[e.rawResults.exports.result.textSegmentResult.selectedCandidateIdx].label}:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.extractExports=r;var o=(n(0),n(2));!function(e){e&&e.__esModule}(o)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=[].concat(r(e.rawStrokes));if(e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result&&e.rawResults.exports.result.scratchOutResults&&e.rawResults.exports.result.scratchOutResults.length>0){var n=e.rawResults.exports.result.scratchOutResults.map(function(e){return e.erasedInkRanges.concat(e.inkRanges)}).reduce(function(e,t){return e.concat(t)});return t.filter(function(e,t){return!n.find(function(e){return e.component===t})})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.extractRecognizedSymbols=o;n(0)},function(e,t,n){"use strict";function r(e,t){var n=e.rawStrokes;return t&&t.length>0&&(n=t.map(function(t){return c.extractStrokesFromInkRange(e,t.stroke?t.stroke:t.firstStroke,t.stroke?t.stroke:t.lastStroke,t.firstPoint,t.lastPoint)}).reduce(function(e,t){return e.concat(t)})),{color:n[0].color,width:n[0].width}}function o(e,t){if(t.candidates&&t.candidates.length>0){var n=t.candidates[t.selectedCandidateIndex];switch(n.type){case"notRecognized":return t.inkRanges&&t.inkRanges.length>0?t.inkRanges.map(function(t){return c.extractStrokesFromInkRange(e,t.firstStroke,t.lastStroke,t.firstPoint,t.lastPoint)}).reduce(function(e,t){return e.concat(t)}):[];case"recognizedShape":return n.primitives;default:return[]}}return[]}function i(e){return e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result&&e.rawResults.exports.result.segments?e.rawResults.exports.result.segments.map(function(t){var n=r(e,t.inkRanges);return o(e,t).map(function(e){return Object.assign(e,n)})}).reduce(function(e,t){return e.concat(t)}):[]}function a(e){return e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result&&e.rawResults.exports.result.segments?{SEGMENTS:e.rawResults.exports.result.segments}:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.getStyleFromInkRanges=r,t.extractShapeSymbols=o,t.extractRecognizedSymbols=i,t.extractExports=a;var s=(n(0),n(3)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){return{type:"hmac",applicationKey:e.recognitionParams.server.applicationKey,challenge:t.data.challenge,hmac:l.computeHmac(t.data.challenge,e.recognitionParams.server.applicationKey,e.recognitionParams.server.hmacKey)}}function i(e){return{type:"applicationKey",applicationKey:e.recognitionParams.server.applicationKey}}function a(e,t){return function(n){var r=t;s.recognizerLogger.trace(n.type+" websocket callback",n);var a=t.recognitionContexts[t.recognitionContexts.length-1];switch(s.recognizerLogger.debug("Current recognition context",a),n.type){case"open":d.send(t,i(t.editor.configuration));break;case"message":switch(s.recognizerLogger.trace("Receiving message",n.data.type),n.data.type){case"hmacChallenge":d.send(t,o(t.editor.configuration,n));break;case"init":r.currentReconnectionCount=0,r.idle=!0,r.initialized=!0,a.callback(void 0,n.data),e.resolve(a);break;case"reset":r.idle=!0,a.callback(void 0,n.data);break;case"mathResult":case"textResult":r.idle=!0,n.data.instanceId&&(t.instanceId&&t.instanceId!==n.data.instanceId&&s.recognizerLogger.debug("Instance id switch from "+t.instanceId+" to "+n.data.instanceId+" this is suspicious"),r.instanceId=n.data.instanceId,s.recognizerLogger.debug("Memorizing instance id",n.data.instanceId)),a.callback(void 0,n.data);break;case"error":s.recognizerLogger.debug("Error detected stopping all recognition",n),a?a.callback(n.data):e.reject(Object.assign({},n.data,{recoverable:!1}));break;default:s.recognizerLogger.warn("This is something unexpected in current recognizer. Not the type of message we should have here.",n)}break;case"error":s.recognizerLogger.debug("Error detected stopping all recognition",n),a?a.callback(Object.assign({},n,{recoverable:!1})):e.reject(Object.assign({},n,{recoverable:!1}));break;case"close":s.recognizerLogger.debug("Close detected stopping all recognition",n),r.initialized=!1,a?a.callback(void 0,n):e.reject(n);break;default:s.recognizerLogger.warn("This is something unexpected in current recognizer. Not the type of message we should have here.",n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildWebSocketCallback=a;var s=n(0),c=n(9),l=r(c),u=n(33),d=r(u),f=n(5),p=(r(f),n(2));!function(e){e&&e.__esModule}(p)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){var t=this,n=new FileReader;return new Promise(function(r,o){n.onload=function(e){return r(e.target.result)},n.onerror=function(){return o(t)},n.readAsText(e)})}function i(e){return 96}function a(){return le}function s(e,t){return{type:"newContentPackage",applicationKey:e.recognitionParams.server.applicationKey,xDpi:i(t),yDpi:i(t),viewSizeHeight:t.clientHeight<e.renderingParams.minHeight?e.renderingParams.minHeight:t.clientHeight,viewSizeWidth:t.clientWidth<e.renderingParams.minWidth?e.renderingParams.minWidth:t.clientWidth}}function c(e,t,n){return{type:"restoreIInkSession",iinkSessionId:n,applicationKey:e.recognitionParams.server.applicationKey,xDpi:i(t),yDpi:i(t),viewSizeHeight:t.clientHeight<e.renderingParams.minHeight?e.renderingParams.minHeight:t.clientHeight,viewSizeWidth:t.clientWidth<e.renderingParams.minWidth?e.renderingParams.minWidth:t.clientWidth}}function l(e){return{type:"newContentPart",contentType:e.recognitionParams.type,mimeTypes:e.triggers.exportContent!==J.default.Trigger.DEMAND?e.recognitionParams.v4[""+e.recognitionParams.type.toLowerCase()].mimeTypes:void 0}}function u(e,t){return{type:"openContentPart",id:t,mimeTypes:e.triggers.exportContent!==J.default.Trigger.DEMAND?e.recognitionParams.v4[""+e.recognitionParams.type.toLowerCase()].mimeTypes:void 0}}function d(e){return Object.assign({type:"configuration"},e.recognitionParams.v4)}function f(e,t){var n=te.extractPendingStrokes(t,e.lastPositions.lastSentPosition+1);if(n.length>0)return te.updateModelSentPosition(t),{type:"addStrokes",strokes:n.map(function(e){return Object.assign({},{id:e.id,pointerType:e.pointerType,pointerId:e.pointerId,x:e.x,y:e.y,t:e.t,p:e.p})})}}function p(){return{type:"undo"}}function g(){return{type:"redo"}}function h(){return{type:"clear"}}function v(e){return{type:"convert",conversionState:e}}function m(e){return{type:"zoom",zoom:e}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:"changeViewSize",height:e.clientHeight<t?t:e.clientHeight,width:e.clientWidth<n?n:e.clientWidth}}function b(e,t,n){var r=void 0;return r=n&&0!==Object.keys(n).length?n:e.recognitionParams.v4[""+e.recognitionParams.type.toLowerCase()].mimeTypes,{type:"export",partId:t,mimeTypes:r}}function x(e,t){return{type:"importFile",importFileId:e,mimeType:t}}function _(e,t,n){return{type:"fileChunk",importFileId:e,data:t,lastChunk:n}}function E(e){return Object.assign({type:"pointerEvents"},e)}function S(){return{type:"waitForIdle"}}function w(e){return{type:"setPenStyle",style:e?$.toCSS(e):""}}function P(e){return{type:"setPenStyleClasses",styleClasses:e}}function k(e){return{type:"setTheme",theme:Z.toCSS(e)}}function R(e,t,n){var r=re.setRecognitionContext(e,{model:te.updateModelSentPosition(t,t.lastPositions.lastReceivedPosition),callback:function(e,r){return ue(t,e,r,n)}});ce.init("/api/v4.0/iink/document",r,se.buildWebSocketCallback,R).catch(function(r){re.shouldAttemptImmediateReconnect(e)&&e.reconnect?(K.recognizerLogger.info("Attempting a reconnect",e.currentReconnectionCount),e.reconnect(e,t,n)):(K.recognizerLogger.error("Unable to reconnect",r),ue(t,r,void 0,n))})}function C(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(r,l,e.editor.configuration).catch(function(r){return ce.retry(C,e,t,n)})}function T(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(r,u,e.editor.configuration,e.currentPartId).catch(function(r){return ce.retry(T,e,t,n)})}function L(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,n){return ue(t,e,n,r)}});ce.sendMessage(o,E,n).catch(function(o){return ce.retry(L,e,t,n,r)})}function M(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(r,f,e,t).catch(function(r){return ce.retry(M,e,t,n)})}function A(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(r,p).catch(function(r){return ce.retry(A,e,t,n)})}function O(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(r,g).catch(function(r){return ce.retry(O,e,t,n)})}function I(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(r,o){ie.clear(e,t,function(e,t){K.recognizerLogger.debug("The model after clear is :",t),ue(t,r,o,n)})}});ce.sendMessage(r,h).catch(function(r){return ce.retry(I,e,t,n)})}function z(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(o,v,r).catch(function(o){return ce.retry(z,e,t,n,r)})}function B(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(o,b,e.editor.configuration,e.currentPartId,r).catch(function(o){return ce.retry(B,e,t,n,r)})}function D(e,t,n,r){for(var i={model:t,callback:function(e,n){return ue(t,e,n,r)},importFileId:F.default()},a=re.setRecognitionContext(e,i),s=e.editor.configuration.recognitionParams.server.websocket.fileChunkSize,c=0;c<n.size;c+=s)!function(c){0===c&&ce.sendMessage(a,x,i.importFileId,n.type).catch(function(o){return ce.retry(D,e,t,n,r)}),o(n.slice(c,s,n.type)).then(function(o){ce.sendMessage(a,_,i.importFileId,o,c+s>n.size).catch(function(o){return ce.retry(D,e,t,n,r)})})}(c)}function N(e,t,n){var r=re.setRecognitionContext(e,{model:t,callback:function(e,r){return ue(t,e,r,n)}});ce.sendMessage(r,S).catch(function(r){return ce.retry(N,e,t,n)})}function j(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,n){return ue(t,e,n,r)}});ce.sendMessage(o,y,n,e.editor.configuration.renderingParams.minHeight,e.editor.configuration.renderingParams.minWidth).catch(function(n){return ce.retry(j,e,t,r)})}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments[3],o=re.setRecognitionContext(e,{model:t,callback:function(e,n){return ue(t,e,n,r)}});ce.sendMessage(o,m,n).catch(function(n){return ce.retry(H,e,t,r)})}function X(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,n){return ue(t,e,n,r)}});ce.sendMessage(o,w,n).catch(function(n){return ce.retry(X,e,t,r)})}function W(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,n){return ue(t,e,n,r)}});ce.sendMessage(o,P,n).catch(function(n){return ce.retry(W,e,t,r)})}function U(e,t,n,r){var o=re.setRecognitionContext(e,{model:t,callback:function(e,n){return ue(t,e,n,r)}});ce.sendMessage(o,k,n).catch(function(n){return ce.retry(U,e,t,r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.setTheme=t.setPenStyleClasses=t.setPenStyle=t.zoom=t.resize=t.waitForIdle=t.import_=t.export_=t.convert=t.clear=t.redo=t.undo=t.addStrokes=t.pointerEvents=t.openContentPart=t.newContentPart=t.init=t.IInkWebSocketV4Configuration=t.close=void 0;var Y=n(32);Object.defineProperty(t,"close",{enumerable:!0,get:function(){return Y.close}}),t.getInfo=a,t.buildNewContentPackageInput=s,t.buildRestoreIInkSessionInput=c,t.buildNewContentPart=l,t.buildOpenContentPart=u,t.buildConfiguration=d,t.buildSetPenStyle=w,t.buildSetPenStyleClasses=P,t.buildSetTheme=k;var G=n(136),F=r(G),K=n(0),V=n(2),J=function(e){return e&&e.__esModule?e:{default:e}}(V),q=n(17),Z=r(q),Q=n(16),$=r(Q),ee=n(3),te=r(ee),ne=n(5),re=r(ne),oe=n(8),ie=r(oe),ae=n(140),se=r(ae),ce=r(Y),le=t.IInkWebSocketV4Configuration={types:[J.default.RecognitionType.MATH,J.default.RecognitionType.TEXT,J.default.RecognitionType.DIAGRAM,J.default.RecognitionType.NEBO],protocol:J.default.Protocol.WEBSOCKET,apiVersion:"V4",availableTriggers:{exportContent:[J.default.Trigger.POINTER_UP,J.default.Trigger.DEMAND],addStrokes:[J.default.Trigger.POINTER_UP]}},ue=function(e,t,n,r){var o=te.updateModelReceivedPosition(e);if(n){if(void 0!==n.updates)return o.recognizedSymbols?o.recognizedSymbols.push(n):o.recognizedSymbols=[n],r(t,o,J.default.EventType.RENDERED);if(void 0!==n.exports)return o.rawResults.exports=n,o.exports=n.exports,r(t,o,J.default.EventType.EXPORTED);if(void 0!==n.canUndo||void 0!==n.canRedo)return r(t,o,J.default.EventType.CHANGED);if("partChanged"===n.type)return r(t,o,J.default.EventType.LOADED);if("idle"===n.type)return r(t,o,J.default.EventType.IDLE);if("close"===n.type)return r(t,o,J.default.EventType.CHANGED)}return r(t,o)};t.init=R,t.newContentPart=C,t.openContentPart=T,t.pointerEvents=L,t.addStrokes=M,t.undo=A,t.redo=O,t.clear=I,t.convert=z,t.export_=B,t.import_=D,t.waitForIdle=N,t.resize=j,t.zoom=H,t.setPenStyle=X,t.setPenStyleClasses=W,t.setTheme=U},function(e,t,n){"use strict";function r(e){return{stack:[],currentPosition:-1,maxSize:e.undoRedoMaxStackSize,canUndo:!1,canRedo:!1}}function o(e){var t=e;return t.canUndo=e.currentPosition>0,t.canRedo=e.currentPosition<e.stack.length-1,t}Object.defineProperty(t,"__esModule",{value:!0}),t.createUndoRedoContext=r,t.updateUndoRedoState=o;n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAvailableLanguageList=t.register=t.DefaultTheme=t.DefaultPenStyle=t.DefaultConfiguration=t.Editor=t.LoggerConfig=t.Constants=t.default=void 0;var o=n(2),i=r(o),a=n(0),s=r(a),c=n(15),l=r(c),u=n(16),d=r(u),f=n(17),p=r(f),g=n(35),h=n(156),v={Constants:i.default,LoggerConfig:s.default,Editor:g.Editor,DefaultConfiguration:l.default,DefaultPenStyle:d.default,DefaultTheme:p.default,register:h.register,getAvailableLanguageList:h.getAvailableLanguageList};t.default=v,t.Constants=i.default,t.LoggerConfig=s.default,t.Editor=g.Editor,t.DefaultConfiguration=l.default,t.DefaultPenStyle=d.default,t.DefaultTheme=p.default,t.register=h.register,t.getAvailableLanguageList=h.getAvailableLanguageList},function(e,t,n){var r,o;!function(i,a){"use strict";r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(0,function(){"use strict";function e(e){return typeof console!==s&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=0;n<c.length;n++){var r=c[n];this[r]=n<e?a:this.methodFactory(r,e,t)}}function o(t,r,o){return e(t)||n.apply(this,arguments)}function i(e,t,n){function i(e){var t=(c[e]||"silent").toUpperCase();try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}function a(){var e;try{e=window.localStorage[d]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(d)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}var l,u=this,d="loglevel";e&&(d+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||o,u.getLevel=function(){return l},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(l=t,!1!==n&&i(t),r.call(u,t,e),typeof console===s&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){a()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var f=a();null==f&&(f=null==t?"WARN":t),u.setLevel(f,!1)}var a=function(){},s="undefined",c=["trace","debug","info","warn","error"],l=new i,u={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new i(e,l.getLevel(),l.methodFactory)),t};var d=typeof window!==s?window.log:void 0;return l.noConflict=function(){return typeof window!==s&&window.log===l&&(window.log=d),l},l})},function(e,t,n){"use strict";/*!
 * is-primitive <https://github.com/jonschlinkert/is-primitive>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e){return null==e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,n){"use strict";/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e,t){if(null===e||void 0===e)throw new TypeError("expected first argument to be an object.");if(void 0===t||"undefined"==typeof Symbol)return e;if("function"!=typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),o=arguments.length,i=0;++i<o;)for(var a=Object(arguments[i]),s=Object.getOwnPropertySymbols(a),c=0;c<s.length;c++){var l=s[c];n.call(a,l)&&(r[l]=a[l])}return r}},function(e,t){function n(e){return e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var r=Object.prototype.toString;e.exports=function(e){var t=typeof e;return"undefined"===t?"undefined":null===e?"null":!0===e||!1===e||e instanceof Boolean?"boolean":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?void 0!==e.constructor.name&&"Generator"===e.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(e)?"array":e instanceof RegExp?"regexp":e instanceof Date?"date":(t=r.call(e),"[object RegExp]"===t?"regexp":"[object Date]"===t?"date":"[object Arguments]"===t?"arguments":"[object Error]"===t?"error":"[object Promise]"===t?"promise":n(e)?"buffer":"[object Set]"===t?"set":"[object WeakSet]"===t?"weakset":"[object Map]"===t?"map":"[object WeakMap]"===t?"weakmap":"[object Symbol]"===t?"symbol":"[object Map Iterator]"===t?"mapiterator":"[object Set Iterator]"===t?"setiterator":"[object Int8Array]"===t?"int8array":"[object Uint8Array]"===t?"uint8array":"[object Uint8ClampedArray]"===t?"uint8clampedarray":"[object Int16Array]"===t?"int16array":"[object Uint16Array]"===t?"uint16array":"[object Int32Array]"===t?"int32array":"[object Uint32Array]"===t?"uint32array":"[object Float32Array]"===t?"float32array":"[object Float64Array]"===t?"float64array":"object")}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(e){var t={grabber:e.grabber||B.grabber,rendererList:e.rendererList||B.rendererList,strokerList:e.strokerList||B.strokerList,recognizerList:e.recognizerList||B.recognizerList,callbacks:e.callbacks||B.callbacks,getBehaviorFromConfiguration:e.getBehaviorFromConfiguration||B.getBehaviorFromConfiguration};return i.editorLogger.debug("Override default behaviors",t),t}return B}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBehaviors=void 0,t.overrideDefaultBehaviors=o;var i=n(0),a=n(60),s=r(a),c=n(36),l=r(c),u=n(64),d=r(u),f=n(65),p=r(f),g=n(102),h=r(g),v=n(45),m=r(v),y=n(128),b=r(y),x=n(129),_=r(x),E=n(130),S=r(E),w=n(131),P=r(w),k=n(132),R=r(k),C=n(133),T=r(C),L=n(135),M=r(L),A=n(52),O=r(A),I=n(141),z=function(e){return e&&e.__esModule?e:{default:e}}(I),B=t.defaultBehaviors={grabber:s,strokerList:[d,h],rendererList:[l,p],recognizerList:[m,b,_,S,P,R,M,T,O],callbacks:[z.default],getBehaviorFromConfiguration:function(e,t){var n={};return n.grabber=e.grabber,t&&("V4"===t.recognitionParams.apiVersion&&"REST"===t.recognitionParams.protocol?n.stroker=d:n.stroker=e.strokerList.find(function(e){return e.getInfo().apiVersion===t.recognitionParams.apiVersion&&e.getInfo().name===t.renderingParams.stroker}),"V4"===t.recognitionParams.apiVersion&&"REST"===t.recognitionParams.protocol?n.renderer=l:n.renderer=e.rendererList.find(function(e){return e.getInfo().apiVersion===t.recognitionParams.apiVersion}),n.recognizer=e.recognizerList.find(function(e){return e.getInfo().types.includes(t.recognitionParams.type)&&e.getInfo().protocol===t.recognitionParams.protocol&&e.getInfo().apiVersion===t.recognitionParams.apiVersion})),n.callbacks=e.callbacks,n}}},function(e,t,n){"use strict";function r(e,t){if(t||0===t){var n=void 0;return n=t>10?c[10]:c[t],Math.round(e*n)/n}return e}function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e;a.changedTouches&&(a=a.changedTouches[0]);var s=t.getBoundingClientRect();return{x:r(a.clientX-s.left-t.clientLeft-i,n.xyFloatPrecision),y:r(a.clientY-s.top-t.clientTop-o,n.xyFloatPrecision),t:r(Date.now(),n.timestampFloatPrecision)}}function i(e,t){function n(){"None"!==window.getSelection().type&&window.getSelection().removeAllRanges()}function r(e){var t=document.querySelector(".more-menu");return!(e.target.classList.contains("ellipsis")||e.target.classList.contains("more-menu")||e.target.classList.contains("options-label-button")||!t||"none"===t.style.display)&&(t.style.display="none",!0)}function i(e){var t=document.querySelector(".candidates");return!(e.target.classList.contains("candidates")||"SPAN"===e.target.tagName||!t||"none"===t.style.display)&&(t.style.display="none",!0)}function a(a){var c=a.target.id===t.domElement.id||a.target.classList.contains("ms-canvas");if(this.activePointerId)this.activePointerId===a.pointerId&&s.grabberLogger.trace(a.type+" event with the same id without any pointer up",a.pointerId);else if(2!==a.button&&2!==a.buttons&&c){if(!r(a)&&!i(a)){this.activePointerId=a.pointerId;var l=a.pointerId>2147483647?-1:a.pointerId;n(),a.stopPropagation(),t.pointerDown(o(a,e,t.configuration,u,d),a.pointerType,l)}}else a.target.classList.contains("ellipsis")||a.target.classList.contains("tag-icon")?(r(a),i(a)):(r(a),i(a),this.smartGuidePointerDown=!0,this.downSmartGuidePoint=o(a,e,t.configuration))}function c(r){if(this.activePointerId&&this.activePointerId===r.pointerId)n(),t.pointerMove(o(r,e,t.configuration,u,d));else if(this.smartGuidePointerDown){var i=o(r,e,t.configuration,u,d),a=Math.abs(this.downSmartGuidePoint.x-i.x),c=Math.abs(this.downSmartGuidePoint.y-i.y);f=Math.max(a,f);var l=a<5&&c>5&&f<15,p=a>5&&c>5&&f<15;if(l||p){this.activePointerId=r.pointerId;var g=r.pointerId>2147483647?-1:r.pointerId;n(),t.pointerDown(this.downSmartGuidePoint,r.pointerType,g)}}else s.grabberLogger.trace(r.type+" event from another pointerid ("+r.pointerId+")",this.activePointerId)}function l(n){f=0,this.smartGuidePointerDown=!1;var r=["smartguide","prompter-text-container","prompter-text","tag-icon","ellipsis"],i=["ps__rail-x","ps__thumb-x"],a=n.relatedTarget&&(r.includes(n.relatedTarget.className)||i.includes(n.relatedTarget.className)),c=n.relatedTarget&&n.target&&(r.includes(n.target.className)||i.includes(n.target.className)),l=n.relatedTarget&&n.target&&("SPAN"===n.target.tagName||"SPAN"===n.relatedTarget.tagName);a||c||l?n.stopPropagation():this.activePointerId&&this.activePointerId===n.pointerId?(this.activePointerId=void 0,n.stopPropagation(),t.pointerUp(o(n,e,t.configuration,u,d))):s.grabberLogger.trace(n.type+" event from another pointerid ("+n.pointerId+")",this.activePointerId)}var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=0,p={options:t.configuration.listenerOptions,listeners:[{types:["pointerdown"],listener:a},{types:["pointermove"],listener:c},{types:["pointerup","pointerout","pointerleave","pointercancel"],listener:l}]};return s.grabberLogger.debug("attaching listeners",p),p.listeners.forEach(function(t){t.types.forEach(function(n){return e.addEventListener(n,t.listener,p.options)})}),p}function a(e,t){s.grabberLogger.debug("detaching listeners",t),t.listeners.forEach(function(n){n.types.forEach(function(r){return e.removeEventListener(r,n.listener,t.options)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.attach=i,t.detach=a;var s=n(0),c=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9]},function(e,t,n){"use strict";function r(e,t,n){n&&n.drawStroke(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawStroke=r},function(e,t,n){"use strict";function r(e,t,n,r){var o=r.width/n.length,i={x:r.topLeftPoint.x+t.data.firstCharacter*o,y:r.topLeftPoint.y+r.height},a={x:r.topLeftPoint.x+t.data.lastCharacter*o,y:r.topLeftPoint.y+r.height};(0,c.drawLine)(e,i,a)}function o(e,t,n){var r=e;r.save();try{r.font=n.textHeight+"px serif",r.textAlign="CENTER"===n.justificationType?"center":"left",r.textBaseline="bottom",r.fillStyle=r.strokeStyle,r.fillText(t,n.topLeftPoint.x,n.topLeftPoint.y+n.height)}finally{r.restore()}}function i(e,t){o(e,t.label,t.data),t.underlineList.forEach(function(n){r(e,n,t.label,t.data)})}function a(e,t){s.rendererLogger.debug("draw "+t.type+" symbol");var n=e;n.save();try{if(n.lineWidth=t.width,n.strokeStyle=t.color,t.elementType)switch(t.elementType){case l.textLine:i(n,t);break;default:s.rendererLogger.error(t.elementType+" not implemented")}else switch(t.type){case l.textLine:i(n,t);break;default:s.rendererLogger.error(t.type+" not implemented")}}finally{n.restore()}}Object.defineProperty(t,"__esModule",{value:!0}),t.TextSymbols=void 0,t.drawTextSymbol=a;var s=n(0),c=n(22),l=t.TextSymbols={inputCharacter:"inputCharacter",char:"char",string:"string",textLine:"textLine"}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return{minX:Math.min(e.minX,t.minX),maxX:Math.max(e.maxX,t.maxX),minY:Math.min(e.minY,t.minY),maxY:Math.max(e.maxY,t.maxY)}}function i(e){return{minX:Math.min(e.firstPoint.x,e.lastPoint.x),maxX:Math.max(e.firstPoint.x,e.lastPoint.x),minY:Math.min(e.firstPoint.y,e.lastPoint.y),maxY:Math.max(e.firstPoint.y,e.lastPoint.y)}}function a(e){var t=Math.cos(e.orientation),n=Math.sin(e.orientation),r=t,o=n;t*=e.maxRadius,r*=e.minRadius,n*=e.maxRadius,o*=e.minRadius;for(var i=Math.abs(e.sweepAngle)/.02,a=[],s=[],c=0;c<=i;c++){var l=e.startAngle+c/i*e.sweepAngle,u=Math.atan2(Math.sin(l)/e.minRadius,Math.cos(l)/e.maxRadius),d=Math.cos(u),f=Math.sin(u);a.push(e.center.x+(t*d-o*f)),s.push(e.center.y+(r*f+n*d))}return{minX:Math.min.apply(Math,a),maxX:Math.max.apply(Math,a),minY:Math.min.apply(Math,s),maxY:Math.max.apply(Math,s)}}function s(e){return{minX:e.data.topLeftPoint.x,maxX:e.data.topLeftPoint.x+e.data.width,minY:e.data.topLeftPoint.y,maxY:e.data.topLeftPoint.y+e.data.height}}function c(e){return{minX:e.boundingBox.x,maxX:e.boundingBox.x+e.boundingBox.width,minY:e.boundingBox.y,maxY:e.boundingBox.y+e.boundingBox.height}}function l(e){return{minX:Math.min.apply(Math,r(e.x)),maxX:Math.max.apply(Math,r(e.x)),minY:Math.min.apply(Math,r(e.y)),maxY:Math.max.apply(Math,r(e.y))}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{minX:Number.MAX_VALUE,maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE},n=t;return n=e.filter(function(e){return"stroke"===e.type}).map(l).reduce(o,n),n=e.filter(function(e){return"clef"===e.type}).map(c).reduce(o,n),n=e.filter(function(e){return"line"===e.type}).map(i).reduce(o,n),n=e.filter(function(e){return"ellipse"===e.type}).map(a).reduce(o,n),n=e.filter(function(e){return"textLine"===e.type}).map(s).reduce(o,n)}function d(e){var t=Object.assign({},{type:"staff"},e.recognitionParams.v3.musicParameter.staff),n={type:"clef",value:Object.assign({},e.recognitionParams.v3.musicParameter.clef)};return n.value.yAnchor=t.top+t.gap*(t.count-n.value.line),delete n.value.line,n.boundingBox=p.MusicClefs[n.value.symbol].getBoundingBox(t.gap,0,n.value.yAnchor),[t,n]}function f(e){switch(e.recognitionParams.type){case h.default.RecognitionType.MUSIC:return d(e);default:return[]}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolsBounds=u,t.getDefaultSymbols=f;var p=n(37),g=n(2),h=function(e){return e&&e.__esModule?e:{default:e}}(g)},function(e,t,n){"use strict";function r(){return{type:"canvas",name:"quadratic",apiVersion:"V3"}}function o(e,t,n){e.arc(t.x,t.y,n,0,2*Math.PI,!0)}function i(e,t,n,r){var o=(0,d.computeLinksPoints)(t,(0,d.computeAxeAngle)(t,n),r),i=(0,d.computeLinksPoints)(n,(0,d.computeAxeAngle)(t,n),r);e.moveTo(o[0].x,o[0].y),e.lineTo(i[0].x,i[0].y),e.lineTo(i[1].x,i[1].y),e.lineTo(o[1].x,o[1].y)}function a(e,t,n,r){var o=(0,d.computeAxeAngle)(t,n),i=(0,d.computeLinksPoints)(n,o,r);e.moveTo(i[0].x,i[0].y);for(var a=1;a<=6;a++){var s=o-a*Math.PI/6;e.lineTo(n.x-n.p*r*Math.sin(s),n.y+n.p*r*Math.cos(s))}}function s(e,t,n,r,o){var i=(0,d.computeLinksPoints)(t,(0,d.computeAxeAngle)(t,r),o),a=(0,d.computeLinksPoints)(n,(0,d.computeAxeAngle)(r,n),o),s=(0,d.computeLinksPoints)(r,(0,d.computeAxeAngle)(t,n),o);e.moveTo(i[0].x,i[0].y),e.quadraticCurveTo(s[0].x,s[0].y,a[0].x,a[0].y),e.lineTo(a[1].x,a[1].y),e.quadraticCurveTo(s[1].x,s[1].y,i[1].x,i[1].y)}function c(e,t){var n=e,r=t.x.length,c=t.width>0?t.width:n.lineWidth,l=t.color?t.color:n.strokeStyle,f=u.getPointByIndex(t,0),p=r-2;n.save();try{if(n.beginPath(),r<3)o(n,f,.6*c);else{o(n,f,c*f.p),i(n,f,(0,d.computeMiddlePoint)(f,u.getPointByIndex(t,1)),c);for(var g=0;g<p;g++)s(n,(0,d.computeMiddlePoint)(u.getPointByIndex(t,g),u.getPointByIndex(t,g+1)),(0,d.computeMiddlePoint)(u.getPointByIndex(t,g+1),u.getPointByIndex(t,g+2)),u.getPointByIndex(t,g+1),c);i(n,(0,d.computeMiddlePoint)(u.getPointByIndex(t,r-2),u.getPointByIndex(t,r-1)),u.getPointByIndex(t,r-1),c),a(n,u.getPointByIndex(t,r-2),u.getPointByIndex(t,r-1),c)}n.closePath(),void 0!==l&&(n.fillStyle=l,n.fill())}finally{n.restore()}}Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=r,t.drawStroke=c;var l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),d=n(38)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return{type:"svg",apiVersion:"V4"}}function i(e){var t=e;return p.rendererLogger.debug("populate root element",t),t.style.fontSize="10px",f.select(t)}function a(e,t){p.rendererLogger.debug("detach renderer",e),t.select("svg").remove()}function s(e,t,n,r,o){var i=e.node().getBoundingClientRect(),a=e.selectAll("svg"),s=i.width<o?o:i.width,c=i.height<r?r:i.height;return a.attr("viewBox","0 0 "+s+", "+c),a.attr("width",s+"px"),a.attr("height",c+"px"),p.rendererLogger.debug("svg viewBox changed",a),t}function c(e,t,n){var r=t;return r.currentStroke.id="pendingStroke-"+t.rawStrokes.length,p.rendererLogger.trace("drawing current stroke ",t.currentStroke),e.select("#pendingStrokes #"+r.currentStroke.id).remove(),(0,g.drawStroke)(e.select("#pendingStrokes").append("path").attr("id",t.currentStroke.id),t.currentStroke,n),r}function l(e,t,n){var r=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","_");switch(r.innerHTML=n,t.toLowerCase()){case"beforebegin":e.parentNode.insertBefore(r.firstChild,e);break;case"afterbegin":e.insertBefore(r.lastChild,e.firstChild);break;case"beforeend":e.appendChild(r.firstChild);break;case"afterend":e.parentNode.insertBefore(r.lastChild,e.nextSibling);break;default:p.rendererLogger.warn("Invalid insertAdjacentHTML position")}}function u(e,t,n){var r=function(e,t){p.rendererLogger.trace("attempting to draw "+e.type+" symbol"),"stroke"!==e.type||t.select("id",e.id)?p.rendererLogger.warn("impossible to draw "+e.type+" symbol"):(0,g.drawStroke)(t.append("path").attr("id",e.id),e,n)},o=function(t){t.updates.forEach(function(n){try{var r='svg[data-layer="'+t.layer+'"]';switch(n.type){case"REPLACE_ALL":e.select(r).remove();var o=e.node();o.insertAdjacentHTML?o.insertAdjacentHTML("beforeEnd",n.svg):l(o,"beforeEnd",n.svg),"MODEL"===t.layer&&e.select(r).append("g").attr("id","pendingStrokes");break;case"REMOVE_ELEMENT":n.id.includes("s")||n.id.includes("MODEL")?e.select("#"+n.id).remove():(e.select("#"+n.id).attr("class","removed-stroke"),setTimeout(function(){e.select("#"+n.id).remove()},100));break;case"REPLACE_ELEMENT":var i=e.select("#"+n.id).node().parentNode;e.select("#"+n.id).remove(),i.insertAdjacentHTML?i.insertAdjacentHTML("beforeEnd",n.svg):(l(i,"beforeEnd",n.svg),e.node().insertAdjacentHTML("beforeEnd",e.select(r).remove().node().outerHTML));break;case"REMOVE_CHILD":e.select("#"+n.parentId+" > *:nth-child("+(n.index+1)+")").remove();break;case"APPEND_CHILD":var a=e.select(n.parentId?"#"+n.parentId:r).node();a.insertAdjacentHTML?a.insertAdjacentHTML("beforeEnd",n.svg):(l(a,"beforeEnd",n.svg),e.node().insertAdjacentHTML("beforeEnd",e.select(r).remove().node().outerHTML));break;case"INSERT_BEFORE":var s=e.select("#"+n.refId).node();s.insertAdjacentHTML?s.insertAdjacentHTML("beforeBegin",n.svg):(l(s,"beforeBegin",n.svg),e.node().insertAdjacentHTML("beforeEnd",e.select(r).remove().node().outerHTML));break;case"REMOVE_ATTRIBUTE":e.selectAll(n.id?"#"+n.id:"svg").attr(n.name,null);break;case"SET_ATTRIBUTE":break;default:p.rendererLogger.debug("unknown update "+n.type+" action")}}catch(e){p.rendererLogger.error("Invalid update "+n.type,n),p.rendererLogger.error("Error on svg patch",e)}})},i=v.extractPendingRecognizedSymbols(t);i&&(i.forEach(function(e){return o(e)}),v.updateModelRenderedPosition(t));var a=v.extractPendingStrokes(t);return a&&a.forEach(function(t){return r(t,e.select("#pendingStrokes"))}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=o,t.attach=i,t.detach=a,t.resize=s,t.drawCurrentStroke=c,t.drawModel=u;var d=n(66),f=r(d),p=n(0),g=n(101),h=n(3),v=r(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67);n.d(t,"create",function(){return r.a});var o=n(18);n.d(t,"creator",function(){return o.a});var i=n(96);n.d(t,"local",function(){return i.a});var a=n(41);n.d(t,"matcher",function(){return a.a});var s=n(97);n.d(t,"mouse",function(){return s.a});var c=n(23);n.d(t,"namespace",function(){return c.a});var l=n(24);n.d(t,"namespaces",function(){return l.a});var u=n(19);n.d(t,"clientPoint",function(){return u.a});var d=n(39);n.d(t,"select",function(){return d.a});var f=n(98);n.d(t,"selectAll",function(){return f.a});var p=n(7);n.d(t,"selection",function(){return p.b});var g=n(25);n.d(t,"selector",function(){return g.a});var h=n(40);n.d(t,"selectorAll",function(){return h.a});var v=n(44);n.d(t,"style",function(){return v.b});var m=n(99);n.d(t,"touch",function(){return m.a});var y=n(100);n.d(t,"touches",function(){return y.a});var b=n(26);n.d(t,"window",function(){return b.a});var x=n(27);n.d(t,"event",function(){return x.c}),n.d(t,"customEvent",function(){return x.a})},function(e,t,n){"use strict";var r=n(18),o=n(39);t.a=function(e){return Object(o.a)(Object(r.a)(e).call(document.documentElement))}},function(e,t,n){"use strict";var r=n(7),o=n(25);t.a=function(e){"function"!=typeof e&&(e=Object(o.a)(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s,c,l=t[a],u=l.length,d=i[a]=new Array(u),f=0;f<u;++f)(s=l[f])&&(c=e.call(s,s.__data__,f,l))&&("__data__"in s&&(c.__data__=s.__data__),d[f]=c);return new r.a(i,this._parents)}},function(e,t,n){"use strict";var r=n(7),o=n(40);t.a=function(e){"function"!=typeof e&&(e=Object(o.a)(e));for(var t=this._groups,n=t.length,i=[],a=[],s=0;s<n;++s)for(var c,l=t[s],u=l.length,d=0;d<u;++d)(c=l[d])&&(i.push(e.call(c,c.__data__,d,l)),a.push(c));return new r.a(i,a)}},function(e,t,n){"use strict";var r=n(7),o=n(41);t.a=function(e){"function"!=typeof e&&(e=Object(o.a)(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var s,c=t[a],l=c.length,u=i[a]=[],d=0;d<l;++d)(s=c[d])&&e.call(s,s.__data__,d,c)&&u.push(s);return new r.a(i,this._parents)}},function(e,t,n){"use strict";function r(e,t,n,r,o,i){for(var s,c=0,l=t.length,u=i.length;c<u;++c)(s=t[c])?(s.__data__=i[c],r[c]=s):n[c]=new a.a(e,i[c]);for(;c<l;++c)(s=t[c])&&(o[c]=s)}function o(e,t,n,r,o,i,s){var l,u,d,f={},p=t.length,g=i.length,h=new Array(p);for(l=0;l<p;++l)(u=t[l])&&(h[l]=d=c+s.call(u,u.__data__,l,t),d in f?o[l]=u:f[d]=u);for(l=0;l<g;++l)d=c+s.call(e,i[l],l,i),(u=f[d])?(r[l]=u,u.__data__=i[l],f[d]=null):n[l]=new a.a(e,i[l]);for(l=0;l<p;++l)(u=t[l])&&f[h[l]]===u&&(o[l]=u)}var i=n(7),a=n(42),s=n(72),c="$";t.a=function(e,t){if(!e)return m=new Array(this.size()),p=-1,this.each(function(e){m[++p]=e}),m;var n=t?o:r,a=this._parents,c=this._groups;"function"!=typeof e&&(e=Object(s.a)(e));for(var l=c.length,u=new Array(l),d=new Array(l),f=new Array(l),p=0;p<l;++p){var g=a[p],h=c[p],v=h.length,m=e.call(g,g&&g.__data__,p,a),y=m.length,b=d[p]=new Array(y),x=u[p]=new Array(y);n(g,h,b,x,f[p]=new Array(v),m,t);for(var _,E,S=0,w=0;S<y;++S)if(_=b[S]){for(S>=w&&(w=S+1);!(E=x[w])&&++w<y;);_._next=E||null}}return u=new i.a(u,a),u._enter=d,u._exit=f,u}},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t,n){"use strict";var r=n(43),o=n(7);t.a=function(){return new o.a(this._exit||this._groups.map(r.a),this._parents)}},function(e,t,n){"use strict";var r=n(7);t.a=function(e){for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),s=new Array(o),c=0;c<a;++c)for(var l,u=t[c],d=n[c],f=u.length,p=s[c]=new Array(f),g=0;g<f;++g)(l=u[g]||d[g])&&(p[g]=l);for(;c<o;++c)s[c]=t[c];return new r.a(s,this._parents)}},function(e,t,n){"use strict";t.a=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this}},function(e,t,n){"use strict";function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var o=n(7);t.a=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=r);for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s){for(var c,l=n[s],u=l.length,d=a[s]=new Array(u),f=0;f<u;++f)(c=l[f])&&(d[f]=c);d.sort(t)}return new o.a(a,this._parents).order()}},function(e,t,n){"use strict";t.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},function(e,t,n){"use strict";t.a=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},function(e,t,n){"use strict";t.a=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}},function(e,t,n){"use strict";t.a=function(){var e=0;return this.each(function(){++e}),e}},function(e,t,n){"use strict";t.a=function(){return!this.node()}},function(e,t,n){"use strict";t.a=function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this}},function(e,t,n){"use strict";function r(e){return function(){this.removeAttribute(e)}}function o(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i(e,t){return function(){this.setAttribute(e,t)}}function a(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function s(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function c(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var l=n(23);t.a=function(e,t){var n=Object(l.a)(e);if(arguments.length<2){var u=this.node();return n.local?u.getAttributeNS(n.space,n.local):u.getAttribute(n)}return this.each((null==t?n.local?o:r:"function"==typeof t?n.local?c:s:n.local?a:i)(n,t))}},function(e,t,n){"use strict";function r(e){return function(){delete this[e]}}function o(e,t){return function(){this[e]=t}}function i(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}t.a=function(e,t){return arguments.length>1?this.each((null==t?r:"function"==typeof t?i:o)(e,t)):this.node()[e]}},function(e,t,n){"use strict";function r(e){return e.trim().split(/^|\s+/)}function o(e){return e.classList||new i(e)}function i(e){this._node=e,this._names=r(e.getAttribute("class")||"")}function a(e,t){for(var n=o(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function s(e,t){for(var n=o(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function c(e){return function(){a(this,e)}}function l(e){return function(){s(this,e)}}function u(e,t){return function(){(t.apply(this,arguments)?a:s)(this,e)}}i.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},t.a=function(e,t){var n=r(e+"");if(arguments.length<2){for(var i=o(this.node()),a=-1,s=n.length;++a<s;)if(!i.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?u:t?c:l)(n,t))}},function(e,t,n){"use strict";function r(){this.textContent=""}function o(e){return function(){this.textContent=e}}function i(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?r:("function"==typeof e?i:o)(e)):this.node().textContent}},function(e,t,n){"use strict";function r(){this.innerHTML=""}function o(e){return function(){this.innerHTML=e}}function i(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?r:("function"==typeof e?i:o)(e)):this.node().innerHTML}},function(e,t,n){"use strict";function r(){this.nextSibling&&this.parentNode.appendChild(this)}t.a=function(){return this.each(r)}},function(e,t,n){"use strict";function r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}t.a=function(){return this.each(r)}},function(e,t,n){"use strict";var r=n(18);t.a=function(e){var t="function"==typeof e?e:Object(r.a)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},function(e,t,n){"use strict";function r(){return null}var o=n(18),i=n(25);t.a=function(e,t){var n="function"==typeof e?e:Object(o.a)(e),a=null==t?r:"function"==typeof t?t:Object(i.a)(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}},function(e,t,n){"use strict";function r(){var e=this.parentNode;e&&e.removeChild(this)}t.a=function(){return this.each(r)}},function(e,t,n){"use strict";function r(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function o(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}t.a=function(e){return this.select(e?o:r)}},function(e,t,n){"use strict";t.a=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},function(e,t,n){"use strict";function r(e,t,n){var r=Object(a.a)(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function o(e,t){return function(){return r(this,e,t)}}function i(e,t){return function(){return r(this,e,t.apply(this,arguments))}}var a=n(26);t.a=function(e,t){return this.each(("function"==typeof t?i:o)(e,t))}},function(e,t,n){"use strict";function r(){return new o}function o(){this._="@"+(++i).toString(36)}t.a=r;var i=0;o.prototype=r.prototype={constructor:o,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},function(e,t,n){"use strict";var r=n(28),o=n(19);t.a=function(e){var t=Object(r.a)();return t.changedTouches&&(t=t.changedTouches[0]),Object(o.a)(e,t)}},function(e,t,n){"use strict";var r=n(7);t.a=function(e){return"string"==typeof e?new r.a([document.querySelectorAll(e)],[document.documentElement]):new r.a([null==e?[]:e],r.c)}},function(e,t,n){"use strict";var r=n(28),o=n(19);t.a=function(e,t,n){arguments.length<3&&(n=t,t=Object(r.a)().changedTouches);for(var i,a=0,s=t?t.length:0;a<s;++a)if((i=t[a]).identifier===n)return Object(o.a)(e,i);return null}},function(e,t,n){"use strict";var r=n(28),o=n(19);t.a=function(e,t){null==t&&(t=Object(r.a)().touches);for(var n=0,i=t?t.length:0,a=new Array(i);n<i;++n)a[n]=Object(o.a)(e,t[n]);return a}},function(e,t,n){"use strict";function r(e,t,n){n&&n.drawStroke(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawStroke=r},function(e,t,n){"use strict";function r(){return{type:"svg",name:"quadratic",apiVersion:"V4"}}function o(e,t,n){return["M "+t.x+","+t.y,"m "+-n+",0","a "+n+","+n+" 0 1 0 "+2*n+",0","a "+n+","+n+" 0 1 0 "+-2*n+",0"].join(" ")}function i(e,t,n,r){var o=(0,d.computeLinksPoints)(t,(0,d.computeAxeAngle)(t,n),r),i=(0,d.computeLinksPoints)(n,(0,d.computeAxeAngle)(t,n),r);return["M "+o[0].x+","+o[0].y,"L "+i[0].x+","+i[0].y,"L "+i[1].x+","+i[1].y,"L "+o[1].x+","+o[1].y].join(" ")}function a(e,t,n,r){for(var o=(0,d.computeAxeAngle)(t,n),i=(0,d.computeLinksPoints)(n,o,r),a=["M "+i[0].x+","+i[0].y],s=1;s<=6;s++){var c=o-s*(Math.PI/6);a.push("L "+(n.x-n.p*r*Math.sin(c))+","+(n.y+n.p*r*Math.cos(c)))}return a.join(" ")}function s(e,t,n,r,o){var i=(0,d.computeLinksPoints)(t,(0,d.computeAxeAngle)(t,r),o),a=(0,d.computeLinksPoints)(n,(0,d.computeAxeAngle)(r,n),o),s=(0,d.computeLinksPoints)(r,(0,d.computeAxeAngle)(t,n),o);return["M "+i[0].x+","+i[0].y,"Q "+s[0].x+","+s[0].y+" "+a[0].x+","+a[0].y,"L "+a[1].x+","+a[1].y,"Q "+s[1].x+","+s[1].y+" "+i[1].x+","+i[1].y].join(" ")}function c(e,t){var n=t.x.length,r=t.width,c=u.getPointByIndex(t,0),l=n-2,f=[];if(n<3)f.push(o(e,c,.6*r));else{f.push(o(e,c,r*c.p)),f.push(i(e,c,(0,d.computeMiddlePoint)(c,u.getPointByIndex(t,1)),r));for(var p=0;p<l;p++)f.push(s(e,(0,d.computeMiddlePoint)(u.getPointByIndex(t,p),u.getPointByIndex(t,p+1)),(0,d.computeMiddlePoint)(u.getPointByIndex(t,p+1),u.getPointByIndex(t,p+2)),u.getPointByIndex(t,p+1),r));f.push(i(e,(0,d.computeMiddlePoint)(u.getPointByIndex(t,n-2),u.getPointByIndex(t,n-1)),u.getPointByIndex(t,n-1),r)),f.push(a(e,u.getPointByIndex(t,n-2),u.getPointByIndex(t,n-1),r))}var g=f.join(" ");e.attr("color",t.color).style("fill",t.color).style("stroke","transparent").classed("pending-stroke",!0).attr("d",g+"Z")}Object.defineProperty(t,"__esModule",{value:!0}),t.getInfo=r,t.drawStroke=c;var l=n(6),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),d=n(38)},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(13),n(104),n(105),n(11),n(12),n(29),n(46),n(106),n(30),n(107),n(108),n(109),n(20),n(110),n(10),n(4),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126))}(0,function(e){return e})},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,n=t.lib,r=n.WordArray,o=r.init;(r.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=r}}(),e.lib.WordArray})},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){return function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var n=e,r=n.lib,o=r.WordArray,i=n.enc;i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}};i.Utf16LE={stringify:function(e){for(var n=e.words,r=e.sigBytes,o=[],i=0;i<r;i+=2){var a=t(n[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=t(e.charCodeAt(i)<<16-i%2*16);return o.create(r,2*n)}}}(),e.enc.Utf16})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(46))}(0,function(e){return function(){var t=e,n=t.lib,r=n.WordArray,o=t.algo,i=o.SHA256,a=o.SHA224=i.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=i._createHelper(a),t.HmacSHA224=i._createHmacHelper(a)}(),e.SHA224})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(13),n(30))}(0,function(e){return function(){var t=e,n=t.x64,r=n.Word,o=n.WordArray,i=t.algo,a=i.SHA512,s=i.SHA384=a.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(13))}(0,function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.x64,s=a.Word,c=n.algo,l=[],u=[],d=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,o=(2*e+3*t)%5;e=r,t=o}for(var e=0;e<5;e++)for(var t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,a=0;a<24;a++){for(var c=0,f=0,p=0;p<7;p++){if(1&i){var g=(1<<p)-1;g<32?f^=1<<g:c^=1<<g-32}128&i?i=i<<1^113:i<<=1}d[a]=s.create(c,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=s.create()}();var p=c.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var i=e[t+2*o],a=e[t+2*o+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=n[o];s.high^=a,s.low^=i}for(var c=0;c<24;c++){for(var p=0;p<5;p++){for(var g=0,h=0,v=0;v<5;v++){var s=n[p+5*v];g^=s.high,h^=s.low}var m=f[p];m.high=g,m.low=h}for(var p=0;p<5;p++)for(var y=f[(p+4)%5],b=f[(p+1)%5],x=b.high,_=b.low,g=y.high^(x<<1|_>>>31),h=y.low^(_<<1|x>>>31),v=0;v<5;v++){var s=n[p+5*v];s.high^=g,s.low^=h}for(var E=1;E<25;E++){var s=n[E],S=s.high,w=s.low,P=l[E];if(P<32)var g=S<<P|w>>>32-P,h=w<<P|S>>>32-P;else var g=w<<P-32|S>>>64-P,h=S<<P-32|w>>>64-P;var k=f[u[E]];k.high=g,k.low=h}var R=f[0],C=n[0];R.high=C.high,R.low=C.low;for(var p=0;p<5;p++)for(var v=0;v<5;v++){var E=p+5*v,s=n[E],T=f[E],L=f[(p+1)%5+5*v],M=f[(p+2)%5+5*v];s.high=T.high^~L.high&M.high,s.low=T.low^~L.low&M.low}var s=n[0],A=d[c];s.high^=A.high,s.low^=A.low}},_doFinalize:function(){var e=this._data,n=e.words,r=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=a[u],f=d.high,p=d.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),l.push(p),l.push(f)}return new o.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(p),n.HmacSHA3=i._createHmacHelper(p)}(Math),e.SHA3})},function(e,t,n){!function(r,o){e.exports=t=o(n(1))}(0,function(e){/** @preserve
	(c) 2012 by Cédric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
return function(t){function n(e,t,n){return e^t^n}function r(e,t,n){return e&t|~e&n}function o(e,t,n){return(e|~t)^n}function i(e,t,n){return e&n|t&~n}function a(e,t,n){return e^(t|~n)}function s(e,t){return e<<t|e>>>32-t}var c=e,l=c.lib,u=l.WordArray,d=l.Hasher,f=c.algo,p=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=u.create([0,1518500249,1859775393,2400959708,2840853838]),y=u.create([1352829926,1548603684,1836072691,2053994217,0]),b=f.RIPEMD160=d.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var c=0;c<16;c++){var l=t+c,u=e[l];e[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var d,f,b,x,_,E,S,w,P,k,R=this._hash.words,C=m.words,T=y.words,L=p.words,M=g.words,A=h.words,O=v.words;E=d=R[0],S=f=R[1],w=b=R[2],P=x=R[3],k=_=R[4];for(var I,c=0;c<80;c+=1)I=d+e[t+L[c]]|0,I+=c<16?n(f,b,x)+C[0]:c<32?r(f,b,x)+C[1]:c<48?o(f,b,x)+C[2]:c<64?i(f,b,x)+C[3]:a(f,b,x)+C[4],I|=0,I=s(I,A[c]),I=I+_|0,d=_,_=x,x=s(b,10),b=f,f=I,I=E+e[t+M[c]]|0,I+=c<16?a(S,w,P)+T[0]:c<32?i(S,w,P)+T[1]:c<48?o(S,w,P)+T[2]:c<64?r(S,w,P)+T[3]:n(S,w,P)+T[4],I|=0,I=s(I,O[c]),I=I+k|0,E=k,k=P,P=s(w,10),w=S,S=I;I=R[1]+b+P|0,R[1]=R[2]+x+k|0,R[2]=R[3]+_+E|0,R[3]=R[4]+d+S|0,R[4]=R[0]+f+w|0,R[0]=I},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,i=o.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e}});c.RIPEMD160=d._createHelper(b),c.HmacRIPEMD160=d._createHmacHelper(b)}(Math),e.RIPEMD160})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(29),n(20))}(0,function(e){return function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.algo,a=i.SHA1,s=i.HMAC,c=i.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=s.create(n.hasher,e),i=o.create(),a=o.create([1]),c=i.words,l=a.words,u=n.keySize,d=n.iterations;c.length<u;){var f=r.update(t).finalize(a);r.reset();for(var p=f.words,g=p.length,h=f,v=1;v<d;v++){h=r.finalize(h),r.reset();for(var m=h.words,y=0;y<g;y++)p[y]^=m[y]}i.concat(f),l[0]++}return i.sigBytes=4*u,i}});t.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),e.PBKDF2})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.mode.CFB=function(){function t(e,t,n,r){var o=this._iv;if(o){var i=o.slice(0);this._iv=void 0}else var i=this._prevBlock;r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}var n=e.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize;t.call(this,e,n,o,r),this._prevBlock=e.slice(n,n+o)}}),n.Decryptor=n.extend({processBlock:function(e,n){var r=this._cipher,o=r.blockSize,i=e.slice(n,n+o);t.call(this,e,n,o,r),this._prevBlock=i}}),n}(),e.mode.CFB})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[r-1]=i[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}});return t.Decryptor=n,t}(),e.mode.CTR})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
return e.mode.CTRGladman=function(){function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var r=e.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),n(a);var s=a.slice(0);r.encryptBlock(s,0);for(var c=0;c<o;c++)e[t+c]^=s[c]}});return r.Decryptor=o,r}(),e.mode.CTRGladman})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._keystream;o&&(i=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}});return t.Decryptor=n,t}(),e.mode.OFB})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,i=n+o-1;e.clamp(),e.words[i>>>2]|=o<<24-i%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.pad.Iso10126={pad:function(t,n){var r=4*n,o=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e.pad.ZeroPadding})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(4))}(0,function(e){return function(t){var n=e,r=n.lib,o=r.CipherParams,i=n.enc,a=i.Hex,s=n.format;s.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return o.create({ciphertext:t})}}}(),e.format.Hex})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(11),n(12),n(10),n(4))}(0,function(e){return function(){var t=e,n=t.lib,r=n.BlockCipher,o=t.algo,i=[],a=[],s=[],c=[],l=[],u=[],d=[],f=[],p=[],g=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=0,r=0,t=0;t<256;t++){var o=r^r<<1^r<<2^r<<3^r<<4;o=o>>>8^255&o^99,i[n]=o,a[o]=n;var h=e[n],v=e[h],m=e[v],y=257*e[o]^16843008*o;s[n]=y<<24|y>>>8,c[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,u[n]=y;var y=16843009*m^65537*v^257*h^16843008*n;d[o]=y<<24|y>>>8,f[o]=y<<16|y>>>16,p[o]=y<<8|y>>>24,g[o]=y,n?(n=h^e[e[e[m^h]]],r^=e[e[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,o=4*(r+1),a=this._keySchedule=[],s=0;s<o;s++)if(s<n)a[s]=t[s];else{var c=a[s-1];s%n?n>6&&s%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=c<<8|c>>>24,c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=h[s/n|0]<<24),a[s]=a[s-n]^c}for(var l=this._invKeySchedule=[],u=0;u<o;u++){var s=o-u;if(u%4)var c=a[s];else var c=a[s-4];l[u]=u<4||s<=4?c:d[i[c>>>24]]^f[i[c>>>16&255]]^p[i[c>>>8&255]]^g[i[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,c,l,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,f,p,g,a);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,a,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],p=4,g=1;g<c;g++){var h=r[l>>>24]^o[u>>>16&255]^i[d>>>8&255]^a[255&f]^n[p++],v=r[u>>>24]^o[d>>>16&255]^i[f>>>8&255]^a[255&l]^n[p++],m=r[d>>>24]^o[f>>>16&255]^i[l>>>8&255]^a[255&u]^n[p++],y=r[f>>>24]^o[l>>>16&255]^i[u>>>8&255]^a[255&d]^n[p++];l=h,u=v,d=m,f=y}var h=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^n[p++],v=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^n[p++],m=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[p++],y=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[p++];e[t]=h,e[t+1]=v,e[t+2]=m,e[t+3]=y},keySize:8});t.AES=r._createHelper(v)}(),e.AES})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(11),n(12),n(10),n(4))}(0,function(e){return function(){function t(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function n(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}var r=e,o=r.lib,i=o.WordArray,a=o.BlockCipher,s=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=a.extend({_doReset:function(){for(var e=this._key,t=e.words,n=[],r=0;r<56;r++){var o=c[r]-1;n[r]=t[o>>>5]>>>31-o%32&1}for(var i=this._subKeys=[],a=0;a<16;a++){for(var s=i[a]=[],d=u[a],r=0;r<24;r++)s[r/6|0]|=n[(l[r]-1+d)%28]<<31-r%6,s[4+(r/6|0)]|=n[28+(l[r+24]-1+d)%28]<<31-r%6;s[0]=s[0]<<1|s[0]>>>31;for(var r=1;r<7;r++)s[r]=s[r]>>>4*(r-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var f=this._invSubKeys=[],r=0;r<16;r++)f[r]=i[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,r,o){this._lBlock=e[r],this._rBlock=e[r+1],t.call(this,4,252645135),t.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),t.call(this,1,1431655765);for(var i=0;i<16;i++){for(var a=o[i],s=this._lBlock,c=this._rBlock,l=0,u=0;u<8;u++)l|=d[u][((c^a[u])&f[u])>>>0];this._lBlock=c,this._rBlock=s^l}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,t.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[r]=this._lBlock,e[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=a._createHelper(p);var g=s.TripleDES=a.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=p.createEncryptor(i.create(t.slice(0,2))),this._des2=p.createEncryptor(i.create(t.slice(2,4))),this._des3=p.createEncryptor(i.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});r.TripleDES=a._createHelper(g)}(),e.TripleDES})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(11),n(12),n(10),n(4))}(0,function(e){return function(){function t(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){t=(t+1)%256,n=(n+e[t])%256;var i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}var n=e,r=n.lib,o=r.StreamCipher,i=n.algo,a=i.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;for(var o=0,i=0;o<256;o++){var a=o%n,s=t[a>>>2]>>>24-a%4*8&255;i=(i+r[o]+s)%256;var c=r[o];r[o]=r[i],r[i]=c}this._i=this._j=0},_doProcessBlock:function(e,n){e[n]^=t.call(this)},keySize:8,ivSize:0});n.RC4=o._createHelper(a);var s=i.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});n.RC4Drop=o._createHelper(s)}(),e.RC4})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(11),n(12),n(10),n(4))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16,a=((o*o>>>17)+o*i>>>15)+i*i,l=((4294901760&r)*r|0)+((65535&r)*r|0);c[n]=a^l}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n=e,r=n.lib,o=r.StreamCipher,i=n.algo,a=[],s=[],c=[],l=i.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,n=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)t.call(this);for(var r=0;r<8;r++)i[r]^=o[r+4&7];if(n){var a=n.words,s=a[0],c=a[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=l>>>16|4294901760&u,f=u<<16|65535&l;i[0]^=l,i[1]^=d,i[2]^=u,i[3]^=f,i[4]^=l,i[5]^=d,i[6]^=u,i[7]^=f;for(var r=0;r<4;r++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),e[n+o]^=a[o]},blockSize:4,ivSize:2});n.Rabbit=o._createHelper(l)}(),e.Rabbit})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(11),n(12),n(10),n(4))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,n=0;n<8;n++)s[n]=t[n];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,i=r>>>16,a=((o*o>>>17)+o*i>>>15)+i*i,l=((4294901760&r)*r|0)+((65535&r)*r|0);c[n]=a^l}e[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,e[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,e[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,e[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,e[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,e[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,e[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,e[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}var n=e,r=n.lib,o=r.StreamCipher,i=n.algo,a=[],s=[],c=[],l=i.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,n=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)t.call(this);for(var i=0;i<8;i++)o[i]^=r[i+4&7];if(n){var a=n.words,s=a[0],c=a[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=l>>>16|4294901760&u,f=u<<16|65535&l;o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=f,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=f;for(var i=0;i<4;i++)t.call(this)}},_doProcessBlock:function(e,n){var r=this._X;t.call(this),a[0]=r[0]^r[5]>>>16^r[3]<<16,a[1]=r[2]^r[7]>>>16^r[5]<<16,a[2]=r[4]^r[1]>>>16^r[7]<<16,a[3]=r[6]^r[3]>>>16^r[1]<<16;for(var o=0;o<4;o++)a[o]=16711935&(a[o]<<8|a[o]>>>24)|4278255360&(a[o]<<24|a[o]>>>8),e[n+o]^=a[o]},blockSize:4,ivSize:2});n.RabbitLegacy=o._createHelper(l)}(),e.RabbitLegacy})},function(e,t,n){!function(r,o,i){e.exports=t=o(n(1),n(13),n(30),n(20))}(0,function(e){return e.HmacSHA512})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return w}function i(e,t){var n=e.editor.configuration,r={components:t.rawStrokes.map(function(e){return h.toJSON(e)})};Object.assign(r,n.recognitionParams.v3.mathParameter),l.recognizerLogger.debug("input.components size is "+r.components.length);var o={instanceId:e?e.instanceId:void 0,applicationKey:n.recognitionParams.server.applicationKey,mathInput:JSON.stringify(r)};return n.recognitionParams.server.hmacKey&&(o.hmac=m.computeHmac(o.mathInput,n.recognitionParams.server.applicationKey,n.recognitionParams.server.hmacKey)),p.updateModelSentPosition(t),o}function a(e,t,n){l.recognizerLogger.debug("Cdkv3RestMathRecognizer result callback",e);var r=p.updateModelReceivedPosition(e);r.rawResults.exports=t,r.recognizedSymbols=S.extractRecognizedSymbols(e),r.exports=b.extractExports(e),l.recognizerLogger.debug("Cdkv3RestMathRecognizer model updated",r),n(void 0,r,d.default.EventType.EXPORTED,d.default.EventType.IDLE)}function s(e,t,n){return _.postMessage("/api/v3.0/recognition/rest/math/doSimpleRecognition.json",e,t,i).then(function(e){return a(t,e,n)}).catch(function(e){return n(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.mathRestV3Configuration=t.reset=t.clear=t.close=t.init=void 0;var c=n(8);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return c.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return c.close}}),Object.defineProperty(t,"clear",{enumerable:!0,get:function(){return c.clear}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return c.reset}}),t.getInfo=o,t.export_=s;var l=n(0),u=n(2),d=function(e){return e&&e.__esModule?e:{default:e}}(u),f=n(3),p=r(f),g=n(6),h=r(g),v=n(9),m=r(v),y=n(31),b=r(y),x=n(14),_=r(x),E=n(49),S=r(E),w=t.mathRestV3Configuration={types:[d.default.RecognitionType.MATH],protocol:d.default.Protocol.REST,apiVersion:"V3",availableTriggers:{exportContent:[d.default.Trigger.QUIET_PERIOD,d.default.Trigger.DEMAND]}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){return P}function a(e,t){var n=e.editor.configuration,r={components:t.rawStrokes.map(function(e){return b.toJSON(e)})};Object.assign(r,{parameter:n.recognitionParams.v3.analyzerParameter}),p.recognizerLogger.debug("input.components size is "+r.components.length);var o={instanceId:e?e.instanceId:void 0,applicationKey:n.recognitionParams.server.applicationKey,analyzerInput:JSON.stringify(r)};return n.recognitionParams.server.hmacKey&&(o.hmac=_.computeHmac(o.analyzerInput,n.recognitionParams.server.applicationKey,n.recognitionParams.server.hmacKey)),m.updateModelSentPosition(t),o}function s(e,t){var n=(0,w.getStyleFromInkRanges)(e,t.inkRanges);switch(t.elementType){case"table":return t.lines.map(function(e){return Object.assign(e,n)});case"textLine":return[t].map(function(e){return Object.assign(e,e.result.textSegmentResult.candidates[e.result.textSegmentResult.selectedCandidateIdx],n)});case"shape":return(0,w.extractShapeSymbols)(e,t).map(function(e){return Object.assign(e,n)});default:return[]}}function c(e){return e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result?[].concat(o(e.rawResults.exports.result.shapes),o(e.rawResults.exports.result.tables),o(e.rawResults.exports.result.textLines)).map(function(t){return s(e,t)}).reduce(function(e,t){return e.concat(t)}):[]}function l(e){return e.rawResults&&e.rawResults.exports&&e.rawResults.exports.result?{ANALYSIS:e.rawResults.exports.result}:{}}function u(e,t,n){p.recognizerLogger.debug("Cdkv3RestAnalyzerRecognizer result callback",e);var r=m.updateModelReceivedPosition(e);r.rawResults.exports=t,r.recognizedSymbols=c(e),r.exports=l(e),p.recognizerLogger.debug("Cdkv3RestAnalyzerRecognizer model updated",r),n(void 0,r,h.default.EventType.EXPORTED,h.default.EventType.CONVERTED,h.default.EventType.IDLE)}function d(e,t,n){return S.postMessage("/api/v3.0/recognition/rest/analyzer/doSimpleRecognition.json",e,t,a).then(function(e){return u(t,e,n)}).catch(function(e){return n(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.analyzerRestV3Configuration=t.reset=t.clear=t.close=t.init=void 0;var f=n(8);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return f.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return f.close}}),Object.defineProperty(t,"clear",{enumerable:!0,get:function(){return f.clear}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return f.reset}}),t.getInfo=i,t.export_=d;var p=n(0),g=n(2),h=function(e){return e&&e.__esModule?e:{default:e}}(g),v=n(3),m=r(v),y=n(6),b=r(y),x=n(9),_=r(x),E=n(14),S=r(E),w=n(50),P=t.analyzerRestV3Configuration={types:[h.default.RecognitionType.ANALYZER],protocol:h.default.Protocol.REST,apiVersion:"V3",availableTriggers:{exportContent:[h.default.Trigger.QUIET_PERIOD,h.default.Trigger.DEMAND]}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return k}function i(e,t){var n=e.editor.configuration,r={components:v.extractPendingStrokes(t).map(function(e){return y.toJSON(e)})};Object.assign(r,n.recognitionParams.v3.shapeParameter),f.recognizerLogger.debug("input.components size is "+r.components.length);var o={instanceId:e?e.instanceId:void 0,applicationKey:n.recognitionParams.server.applicationKey,shapeInput:JSON.stringify(r)};return n.recognitionParams.server.hmacKey&&(o.hmac=x.computeHmac(o.shapeInput,n.recognitionParams.server.applicationKey,n.recognitionParams.server.hmacKey)),v.updateModelSentPosition(t),o}function a(e,t){return{instanceSessionId:e?e.instanceId:void 0}}function s(e,t,n){f.recognizerLogger.debug("Cdkv3RestShapeRecognizer result callback",e);var r=v.updateModelReceivedPosition(e);r.rawResults.exports=t,r.recognizedSymbols=P.extractRecognizedSymbols(e),r.exports=P.extractExports(e),f.recognizerLogger.debug("Cdkv3RestShapeRecognizer model updated",r),n(void 0,r,g.default.EventType.EXPORTED,g.default.EventType.CONVERTED,g.default.EventType.IDLE)}function c(e,t,n){S.postMessage("/api/v3.0/recognition/rest/shape/doSimpleRecognition.json",e,t,i).then(function(e){return s(t,e,n)}).catch(function(e){return n(e,t)})}function l(e,t,n){var r=v.resetModelPositions(t);S.postMessage("/api/v3.0/recognition/rest/shape/clearSessionId.json",e,r,a).then(function(e){return n(void 0,r,g.default.EventType.IDLE)}).catch(function(e){return n(e,r)})}function u(e,t,n){var r=v.clearModel(v.cloneModel(t));S.postMessage("/api/v3.0/recognition/rest/shape/clearSessionId.json",e,r,a).then(function(e){return n(void 0,r,g.default.EventType.CHANGED,g.default.EventType.EXPORTED,g.default.EventType.CONVERTED,g.default.EventType.IDLE)}).catch(function(e){return n(e,r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.shapeRestV3Configuration=t.close=t.init=void 0;var d=n(8);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return d.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return d.close}}),t.getInfo=o,t.export_=c,t.reset=l,t.clear=u;var f=n(0),p=n(2),g=function(e){return e&&e.__esModule?e:{default:e}}(p),h=n(3),v=r(h),m=n(6),y=r(m),b=n(9),x=r(b),_=n(5),E=(r(_),n(14)),S=r(E),w=n(50),P=r(w),k=t.shapeRestV3Configuration={types:[g.default.RecognitionType.SHAPE],protocol:g.default.Protocol.REST,apiVersion:"V3",availableTriggers:{exportContent:[g.default.Trigger.QUIET_PERIOD,g.default.Trigger.DEMAND]}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return P}function i(e,t){var n=e.editor.configuration,r={components:[].concat(t.defaultSymbols,t.rawStrokes).filter(function(e){return"staff"!==e.type}).map(function(e){return"stroke"===e.type?y.toJSON(e):e})},o=Object.assign({},n.recognitionParams.v3.musicParameter);delete o.clef,Object.assign(r,o),u.recognizerLogger.debug("input.components size is "+r.components.length);var i={instanceId:e?e.instanceId:void 0,applicationKey:n.recognitionParams.server.applicationKey,musicInput:JSON.stringify(r)};return n.recognitionParams.server.hmacKey&&(i.hmac=x.computeHmac(i.musicInput,n.recognitionParams.server.applicationKey,n.recognitionParams.server.hmacKey)),g.updateModelSentPosition(t),i}function a(e,t,n){u.recognizerLogger.debug("Cdkv3RestMusicRecognizer result callback",e);var r=g.updateModelReceivedPosition(e);r.rawResults.exports=t,r.exports=E.extractExports(e),u.recognizerLogger.debug("Cdkv3RestMusicRecognizer model updated",r),n(void 0,r,f.default.EventType.EXPORTED,f.default.EventType.IDLE)}function s(e,t,n){var r=g.resetModelPositions(t);u.recognizerLogger.debug("Updated model",r);var o=v.updateRecognitionPositions(e,r.lastPositions);o.initPromise=Promise.resolve(r),o.initPromise.then(function(e){o.initialized=!0,u.recognizerLogger.debug("Updated recognizer context",o),n(void 0,e,f.default.EventType.LOADED,f.default.EventType.RENDERED)})}function c(e,t,n){w.postMessage("/api/v3.0/recognition/rest/music/doSimpleRecognition.json",e,t,i).then(function(e){return a(t,e,n)}).catch(function(e){return n(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.musicRestV3Configuration=t.reset=t.clear=t.close=void 0;var l=n(8);Object.defineProperty(t,"close",{enumerable:!0,get:function(){return l.close}}),Object.defineProperty(t,"clear",{enumerable:!0,get:function(){return l.clear}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return l.reset}}),t.getInfo=o,t.init=s,t.export_=c;var u=n(0),d=n(2),f=function(e){return e&&e.__esModule?e:{default:e}}(d),p=n(3),g=r(p),h=n(5),v=r(h),m=n(6),y=r(m),b=n(9),x=r(b),_=n(31),E=r(_),S=n(14),w=r(S),P=t.musicRestV3Configuration={types:[f.default.RecognitionType.MUSIC],protocol:f.default.Protocol.REST,apiVersion:"V3",availableTriggers:{exportContent:[f.default.Trigger.QUIET_PERIOD,f.default.Trigger.DEMAND]}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return L}function i(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments[5],a=t.editor.configuration;return v.post(t,a.recognitionParams.server.scheme+"://"+a.recognitionParams.server.host+e,r(t,n,o),"V4",i).then(function(e){b.recognizerLogger.debug("iinkRestRecognizer success",e);var n=t.lastPositions;n.lastReceivedPosition=n.lastSentPosition;var r=y.updateRecognitionPositions(t,n);return e.instanceId&&(r.instanceId=e.instanceId),e})}function a(e){return{text:e.recognitionParams.v4.text,lang:e.recognitionParams.v4.lang,export:e.recognitionParams.v4.export}}function s(e){return{math:e.recognitionParams.v4.math,lang:e.recognitionParams.v4.lang,export:e.recognitionParams.v4.export}}function c(e){return{diagram:e.recognitionParams.v4.diagram,lang:e.recognitionParams.v4.lang,export:e.recognitionParams.v4.export}}function l(e,t,n){var r=e.editor.configuration,o=void 0;"TEXT"===r.recognitionParams.type?o=a(r):"MATH"===r.recognitionParams.type?o=s(r):"DIAGRAM"===r.recognitionParams.type&&(o=c(r));var i=[];t.strokeGroups.forEach(function(e){var t="{}"===JSON.stringify(e.penStyle)?null:T.toCSS(e.penStyle),n={penStyle:t,strokes:e.strokes.map(function(e){return P.toJSONV4(e)})};i.push(n)});var l={configuration:o,xDPI:96,yDPI:96,contentType:r.recognitionParams.type.charAt(0).toUpperCase()+r.recognitionParams.type.slice(1).toLowerCase(),height:e.editor.domElement.clientHeight,width:e.editor.domElement.clientWidth,theme:R.toCSS(e.editor.theme),strokeGroups:i};return n&&(l.conversionState="DIGITAL_EDIT"),S.updateModelSentPosition(t),l}function u(e,t,n){var r={};return"application/vnd.myscript.jiix"===t&&(r.jiix=n),"TEXT"===e.recognitionParams.type&&"text/plain"===t?r.text=n:"DIAGRAM"===e.recognitionParams.type?("image/svg+xml"===t&&(r.svg=n),"application/vnd.openxmlformats-officedocument.presentationml.presentation"===t&&(r.pptx=n),"application/vnd.microsoft.art-gvml-clipformat"===t&&(r.clipformat=n)):"MATH"===e.recognitionParams.type&&("application/x-latex"===t&&(r.latex=n),"application/mathml+xml"===t&&(r.mathml=n),"application/mathofficeXML"===t&&(r.mathofficeXML=n)),r}function d(e,t,n,r,o){b.recognizerLogger.debug("iinkRestRecognizer result callback",e);var i=S.updateModelReceivedPosition(e);i.rawResults.exports=n,i.exports?Object.assign(i.exports,u(t,r,n)):i.exports=u(t,r,n),b.recognizerLogger.debug("iinkRestRecognizer model updated",i),o(void 0,i,_.default.EventType.EXPORTED,_.default.EventType.IDLE)}function f(e,t,n){function r(r){i("/api/v4.0/iink/batch",e,t,l,o.restConversionState,r).then(function(e){return d(t,o,e,r,n)}).catch(function(e){return n(e,t)})}var o=e.editor.configuration;"TEXT"===o.recognitionParams.type?o.recognitionParams.v4.text.mimeTypes.forEach(function(e){r(e)}):"DIAGRAM"===o.recognitionParams.type?o.recognitionParams.v4.diagram.mimeTypes.forEach(function(e){r(e)}):"MATH"===o.recognitionParams.type&&o.recognitionParams.v4.math.mimeTypes.forEach(function(e){r(e)})}function p(e,t,n){var r=e.editor.configuration;i("/api/v4.0/iink/batch",e,t,l,"DIGITAL_EDIT").then(function(e){return d(t,r,e,n)}).catch(function(e){return n(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.iinkRestConfiguration=t.reset=t.clear=t.close=t.init=void 0;var g=n(8);Object.defineProperty(t,"init",{enumerable:!0,get:function(){return g.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return g.close}}),Object.defineProperty(t,"clear",{enumerable:!0,get:function(){return g.clear}}),Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return g.reset}}),t.getInfo=o,t.postMessage=i,t.export_=f,t.convert=p;var h=n(47),v=r(h),m=n(5),y=r(m),b=n(0),x=n(2),_=function(e){return e&&e.__esModule?e:{default:e}}(x),E=n(3),S=r(E),w=n(6),P=r(w),k=n(17),R=r(k),C=n(16),T=r(C),L=t.iinkRestConfiguration={types:[_.default.RecognitionType.TEXT,_.default.RecognitionType.DIAGRAM,_.default.RecognitionType.MATH],protocol:_.default.Protocol.REST,apiVersion:"V4",availableTriggers:{exportContent:[_.default.Trigger.QUIET_PERIOD,_.default.Trigger.DEMAND]}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return L}function i(e,t){if(v.updateModelSentPosition(t),e.lastPositions.lastSentPosition<0){return{type:"start",parameters:e.editor.configuration.recognitionParams.v3.mathParameter,components:t.rawStrokes.map(function(e){return x.toJSON(e)})}}return{type:"continue",components:v.extractPendingStrokes(t,-1).map(function(e){return x.toJSON(e)})}}function a(e){return v.resetModelPositions(e),{type:"reset"}}function s(e,t,n){var r=y.setRecognitionContext(e,{model:v.resetModelPositions(t),callback:function(e,r){return M(t,e,r,n)}});S.init("/api/v3.0/recognition/ws/math",r,E.buildWebSocketCallback,s).catch(function(r){y.shouldAttemptImmediateReconnect(e)&&e.reconnect?(f.recognizerLogger.info("Attempting a reconnect",e.currentReconnectionCount),e.reconnect(e,t,n)):(f.recognizerLogger.error("Unable to init",r),n(r,t))})}function c(e,t,n){var r=y.setRecognitionContext(e,{model:t,callback:function(e,r){return M(t,e,r,n)}});S.sendMessage(r,i,e,t).catch(function(r){return S.retry(c,e,t,n)})}function l(e,t,n){var r=y.setRecognitionContext(e,{model:t,callback:function(e,r){return M(t,e,r,n)}});S.sendMessage(r,a,t).catch(function(r){return S.retry(l,e,t,n)})}function u(e,t,n){P.clear(e,t,function(t,r){for(var o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];l(e,r,function(e,t){return f.recognizerLogger.trace("Session reset")}),n.apply(void 0,[t,r].concat(i))})}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.export_=t.init=t.mathWebSocketV3Configuration=t.close=void 0;var d=n(32);Object.defineProperty(t,"close",{enumerable:!0,get:function(){return d.close}}),t.getInfo=o,t.clear=u;var f=n(0),p=n(2),g=function(e){return e&&e.__esModule?e:{default:e}}(p),h=n(3),v=r(h),m=n(5),y=r(m),b=n(6),x=r(b),_=n(51),E=r(_),S=r(d),w=n(8),P=r(w),k=n(31),R=r(k),C=n(49),T=r(C),L=t.mathWebSocketV3Configuration={types:[g.default.RecognitionType.MATH],protocol:g.default.Protocol.WEBSOCKET,apiVersion:"V3",availableTriggers:{exportContent:[g.default.Trigger.POINTER_UP]}},M=function(e,t,n,r){if(n){if("init"===n.type)return r(t,e,g.default.EventType.LOADED,g.default.EventType.IDLE);if("close"===n.type)return r(t,e,g.default.EventType.CHANGED);var o=v.updateModelReceivedPosition(e);return o.rawResults.exports=n,o.exports=R.extractExports(o),o.recognizedSymbols=T.extractRecognizedSymbols(o),r(t,o,g.default.EventType.EXPORTED,g.default.EventType.IDLE)}return r(t,e)};t.init=s,t.export_=c,t.reset=l},function(e,t,n){"use strict";function r(){var e=void 0,t=void 0;return{promise:new Promise(function(n,r){e=n,t=r}),resolve:e,reject:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.destructurePromise=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(){return T}function i(e,t){if(m.updateModelSentPosition(t),e.lastPositions.lastSentPosition<0){return{type:"start",textParameter:e.editor.configuration.recognitionParams.v3.textParameter,inputUnits:[{textInputType:"MULTI_LINE_TEXT",components:t.rawStrokes.map(function(e){return _.toJSON(e)})}]}}return{type:"continue",inputUnits:[{textInputType:"MULTI_LINE_TEXT",components:m.extractPendingStrokes(t,-1).map(function(e){return _.toJSON(e)})}]}}function a(e){return m.resetModelPositions(e),{type:"reset"}}function s(e,t,n){var r=b.setRecognitionContext(e,{model:m.resetModelPositions(t),callback:function(e,r){return L(t,e,r,n)}});w.init("/api/v3.0/recognition/ws/text",r,S.buildWebSocketCallback,s).catch(function(r){b.shouldAttemptImmediateReconnect(e)&&e.reconnect?(f.recognizerLogger.info("Attempting a reconnect",e.currentReconnectionCount),e.reconnect(e,t,n)):(f.recognizerLogger.error("Unable to init",r),n(r,t))})}function c(e,t,n){var r=b.setRecognitionContext(e,{model:t,callback:function(e,r){return L(t,e,r,n)}});w.sendMessage(r,i,e,t).catch(function(r){return w.retry(c,e,t,n)})}function l(e,t,n){var r=b.setRecognitionContext(e,{model:t,callback:function(e,r){return L(t,e,r,n)}});w.sendMessage(r,a,t).catch(function(r){return w.retry(l,e,t,n)})}function u(e,t,n){k.clear(e,t,function(t,r){for(var o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];l(e,r,function(e,t){return f.recognizerLogger.trace("Session reset")}),n.apply(void 0,[t,r].concat(i))})}Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.export_=t.init=t.textWebSocketV3Configuration=t.close=void 0;var d=n(32);Object.defineProperty(t,"close",{enumerable:!0,get:function(){return d.close}}),t.getInfo=o,t.clear=u;var f=n(0),p=n(9),g=(r(p),n(2)),h=function(e){return e&&e.__esModule?e:{default:e}}(g),v=n(3),m=r(v),y=n(5),b=r(y),x=n(6),_=r(x),E=n(51),S=r(E),w=r(d),P=n(8),k=r(P),R=n(48),C=r(R),T=t.textWebSocketV3Configuration={types:[h.default.RecognitionType.TEXT],protocol:h.default.Protocol.WEBSOCKET,apiVersion:"V3",availableTriggers:{exportContent:[h.default.Trigger.POINTER_UP]}},L=function(e,t,n,r){if(n){if("init"===n.type)return r(t,e,h.default.EventType.LOADED,h.default.EventType.IDLE);if("close"===n.type)return r(t,e,h.default.EventType.CHANGED);var o=m.updateModelReceivedPosition(e);return o.rawResults.exports=n,o.exports=C.extractExports(e),r(t,o,h.default.EventType.EXPORTED,h.default.EventType.IDLE)}return r(t,e)};t.init=s,t.export_=c,t.reset=l},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||i(a)}var o=n(137),i=n(139);e.exports=r},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(t,n(138))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(e,t){var n=t||0,o=r;return o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+"-"+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]+o[e[n++]]}for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){return{type:"hmac",hmac:c.computeHmac(t.data.hmacChallenge,e.recognitionParams.server.applicationKey,e.recognitionParams.server.hmacKey)}}function i(e,t){return function(n){var r=t;a.recognizerLogger.trace(n.type+" websocket callback",n);var i=t.recognitionContexts[t.recognitionContexts.length-1];switch(a.recognizerLogger.debug("Current recognition context",i),n.type){case"open":t.sessionId?u.send(t,(0,p.buildRestoreIInkSessionInput)(t.editor.configuration,t.editor.domElement,t.sessionId)):u.send(t,(0,p.buildNewContentPackageInput)(t.editor.configuration,t.editor.domElement));break;case"message":switch(a.recognizerLogger.debug("Receiving "+n.data.type+" message",n),n.data.type){case"ack":n.data.hmacChallenge&&u.send(t,o(t.editor.configuration,n)),n.data.iinkSessionId&&(r.sessionId=n.data.iinkSessionId);break;case"newPart":break;case"contentPackageDescription":r.currentReconnectionCount=0,r.contentPartCount=n.data.contentPartCount,u.send(t,(0,p.buildConfiguration)(t.editor.configuration)),r.currentPartId?u.send(t,(0,p.buildOpenContentPart)(t.editor.configuration,t.currentPartId)):u.send(t,(0,p.buildNewContentPart)(t.editor.configuration));break;case"partChanged":n.data.partId&&(r.currentPartId=n.data.partId),r.initialized=!0,u.send(t,(0,p.buildSetTheme)(t.editor.theme)),u.send(t,(0,p.buildSetPenStyle)(t.editor.penStyle)),u.send(t,(0,p.buildSetPenStyleClasses)(t.editor.penStyleClasses)),i.callback(void 0,n.data),e.resolve(i);break;case"contentChanged":void 0!==n.data.canUndo&&(r.canUndo=n.data.canUndo),void 0!==n.data.canRedo&&(r.canRedo=n.data.canRedo),void 0!==n.data.empty&&(r.isEmpty=n.data.empty),void 0!==n.data.possibleUndoCount&&(r.possibleUndoCount=n.data.possibleUndoCount),void 0!==n.data.undoStackIndex&&(r.undoStackIndex=n.data.undoStackIndex),i.callback(void 0,n.data);break;case"exported":case"svgPatch":case"fileChunkAck":i.callback(void 0,n.data);break;case"idle":r.idle=!0,i.callback(void 0,n.data);break;case"error":a.recognizerLogger.debug("Error detected stopping all recognition",n),i?i.callback(n.data):e.reject(Object.assign({},n.data,{recoverable:!1}));break;default:a.recognizerLogger.warn("This is something unexpected in current recognizer. Not the type of message we should have here.",n)}break;case"error":a.recognizerLogger.debug("Error detected stopping all recognition",n),i?i.callback(Object.assign({},n,{recoverable:!1})):e.reject(Object.assign({},n,{recoverable:!1}));break;case"close":a.recognizerLogger.debug("Close detected stopping all recognition",n),r.initialized=!1,r.canRedo=!1,r.canUndo=!1,i?i.callback(void 0,n):e.reject(n);break;default:a.recognizerLogger.warn("This is something unexpected in current recognizer. Not the type of message we should have here.",n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildWebSocketCallback=i;var a=n(0),s=n(9),c=r(s),l=n(33),u=r(l),d=n(5),f=(r(d),n(2)),p=(function(e){e&&e.__esModule}(f),n(52))},function(e,t,n){"use strict";function r(e,t){o.callbackLogger.info("emitting "+e+" event",t),this.dispatchEvent(new CustomEvent(e,Object.assign({bubbles:!0,composed:!0},t?{detail:t}:void 0)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.stack[e.currentPosition],o=arguments.length,i=Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];t.apply(void 0,[void 0,n?l.cloneModel(r):r].concat(i))}function i(e,t,n){var r=e.stack.findIndex(function(e){return e.modificationTime===t.modificationTime&&e.rawStrokes.length===t.rawStrokes.length}),i=t;i.modificationTime=(new Date).getTime();var a=[];if(r>-1)e.stack.splice(r,1,l.cloneModel(i)),f.modelLogger.debug("model updated",i);else{var s=e;s.currentPosition+=1,s.stack=s.stack.slice(0,s.currentPosition),s.stack.push(l.cloneModel(i)),s.stack.length>s.maxSize&&(s.stack.shift(),s.currentPosition--),f.modelLogger.debug("model pushed",i),a.push(g.default.EventType.CHANGED)}d.updateUndoRedoState(e),f.modelLogger.debug("undo/redo stack updated",e),o.apply(void 0,[e,n,!1].concat(a))}function a(e,t,n){var r=e;r.currentPosition>0&&(r.currentPosition-=1,d.updateUndoRedoState(e),f.modelLogger.debug("undo index",r.currentPosition)),o(e,n,!0,g.default.EventType.CHANGED,g.default.EventType.EXPORTED)}function s(e,t,n){var r=e;r.currentPosition<r.stack.length-1&&(r.currentPosition+=1,d.updateUndoRedoState(e),f.modelLogger.debug("redo index",r.currentPosition)),o(e,n,!0,g.default.EventType.CHANGED,g.default.EventType.EXPORTED)}Object.defineProperty(t,"__esModule",{value:!0}),t.getModel=o,t.updateModel=i,t.undo=a,t.redo=s;var c=n(3),l=r(c),u=n(53),d=r(u),f=n(0),p=n(2),g=function(e){return e&&e.__esModule?e:{default:e}}(p)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){var t={strokesCount:0,pointsCount:0,byteSize:0,humanSize:0,humanUnit:"BYTE"};if(e.rawStrokes){t.strokesCount=e.rawStrokes.length;var n=s.buildInput(l.createEmptyRecognizerContext({configuration:d.default}),e);t.pointsCount=e.rawStrokes.map(function(e){return e.x.length}).reduce(function(e,t){return e+t},0);var r=n.textInput.length;t.byteSize=r,r<270?(t.humanUnit="BYTE",t.byteSize=0,t.humanSize=0):r<2048?(t.humanUnit="BYTES",t.humanSize=r):r<1048576?(t.humanUnit="KiB",t.humanSize=(r/1024).toFixed(2)):(t.humanUnit="MiB",t.humanSize=(r/1024/1024).toFixed(2))}return i.utilLogger.info("Stats",t),t}Object.defineProperty(t,"__esModule",{value:!0}),t.computeStats=o;var i=n(0),a=n(45),s=r(a),c=n(5),l=r(c),u=n(15),d=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=document,r=n.createElement("canvas");return r.width=Math.abs(e.maxX-e.minX)+2*t,r.style.width=r.width+"px",r.height=Math.abs(e.maxY-e.minY)+2*t,r.style.height=r.height+"px",r}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(e.rawStrokes.length>0){var o=s.getBorderCoordinates(e),a=r(o,n),c=r(o,n),l={renderingCanvas:c,renderingCanvasContext:c.getContext("2d"),capturingCanvas:a,capturingCanvasContext:a.getContext("2d")};return l.renderingCanvasContext.translate(-o.minX+n,-o.minY+n),(0,i.drawModel)(l,e,t),l.renderingCanvas.toDataURL("image/png")}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.getImage=o;var i=n(36),a=n(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.createElement("div");t.id="smartguide"+e,t.classList.add("smartguide");var n=document.createElement("div");n.id="prompter-text"+e,n.classList.add("prompter-text"),n.setAttribute("touch-action","none");var r=document.createElement("div");r.id="prompter-text-container"+e,r.classList.add("prompter-text-container"),r.appendChild(n);var o=document.createElement("div");o.id="ellipsis"+e,o.classList.add("ellipsis"),o.innerHTML="...";var i=document.createElement("div");i.id="tag-icon"+e,i.classList.add("tag-icon"),i.innerHTML="&#182;";var a=document.createElement("div");a.id="candidates"+e,a.classList.add("candidates");var s=document.createElement("div");s.id="more-menu"+e,s.classList.add("more-menu");var c=document.createElement("button");c.classList.add("options-label-button"),c.id="convert"+e,c.innerHTML="Convert";var l=document.createElement("button");l.classList.add("options-label-button"),l.id="copy"+e,l.innerHTML="Copy";var u=document.createElement("button");return u.classList.add("options-label-button"),u.id="delete"+e,u.innerHTML="Delete",{smartGuideElement:t,textElement:n,textContainer:r,candidatesElement:a,menuElement:s,tagElement:i,ellipsisElement:o,convertElement:c,copyElement:l,deleteElement:u}}function i(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1}function a(e,t){var n=t,r=function(){var t=e.target.offsetLeft-68;n.menuElement.style.left=t+"px"},o=document.contains(n.menuElement);i(n.menuElement)||o?"none"===n.menuElement.style.display&&(r(),n.menuElement.style.display="flex"):(n.menuElement.style.display="flex",r(),function(){n.menuElement.appendChild(n.convertElement),n.menuElement.appendChild(n.copyElement),n.menuElement.appendChild(n.deleteElement),e.target.parentNode.insertBefore(n.menuElement,e.target)}())}function s(e,t,n){var r=n,o=n.elements;if(e.target.id!=="prompter-text"+n.randomString){var i=e.target.id.replace("word-","").replace(n.randomString,""),a=JSON.parse(t.exports[x.default.Exports.JIIX]).words;if(r.wordToChange=a[i],r.wordToChange.id=i,o.candidatesElement.innerHTML="",r.wordToChange&&r.wordToChange.candidates){o.candidatesElement.style.display="flex",r.wordToChange.candidates.forEach(function(e,t){r.wordToChange.label===e?o.candidatesElement.innerHTML+='<span id="cdt-'+t+n.randomString+'" class="selected-word">'+e+"</span>":o.candidatesElement.innerHTML+='<span id="cdt-'+t+n.randomString+'">'+e+"</span>"});var s=e.target.getBoundingClientRect().left-60;o.candidatesElement.style.top="48px",o.candidatesElement.style.left=s+"px";e.target.parentNode.parentNode.parentNode.insertBefore(o.candidatesElement,e.target.parentNode.parentNode)}}}function c(e,t,n){var r=n,o=n.elements,i=e.target.innerText;if(i!==r.wordToChange.label&&r.wordToChange.candidates.includes(i)){var a=JSON.parse(t.exports[x.default.Exports.JIIX]);a.words[r.wordToChange.id].label=i,t.import_(JSON.stringify(a),x.default.Exports.JIIX)}o.candidatesElement.style.display="none"}function l(e,t){var n=t.elements;n.textElement.addEventListener("click",function(n){return s(n,e,t)}),n.candidatesElement.addEventListener("click",function(n){return c(n,e,t)}),n.ellipsisElement.addEventListener("click",function(e){return a(e,n)}),n.copyElement.addEventListener("click",function(){n.menuElement.style.display="none"}),n.convertElement.addEventListener("click",function(){n.menuElement.style.display="none",e.convert()}),n.deleteElement.addEventListener("click",function(){n.menuElement.style.display="none",e.clear()})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=arguments[1],n=t,r=t.elements;new MutationObserver(function(t){t.forEach(function(){n.smartGuideTimeOutId&&clearTimeout(n.smartGuideTimeOutId),"none"===r.candidatesElement.style.display&&"none"===r.menuElement.style.display?n.smartGuideTimeOutId=setTimeout(function(){r.smartGuideElement.classList.add("smartguide-out"),r.smartGuideElement.classList.remove("smartguide-in")},e):document.contains(r.candidatesElement)||document.contains(r.menuElement)||(n.smartGuideTimeOutId=setTimeout(function(){r.smartGuideElement.classList.add("smartguide-out"),r.smartGuideElement.classList.remove("smartguide-in")},e))})}).observe(r.smartGuideElement,{childList:!0,subtree:!0,attributes:!0})}function d(e){var t="-"+Math.random().toString(10).substring(2,12),n=o(t),r=(new y.default(n.copyElement),new v.default(n.textContainer,{suppressScrollY:!0})),i={editor:e,wordToChange:"",lastWord:"",previousLabelExport:" ",perfectScrollbar:r,elements:n,smartGuideTimeOutId:0,randomString:t};return l(e,i),e.configuration.recognitionParams.v4.text.smartGuideFadeOut.enable&&u(e.configuration.recognitionParams.v4.text.smartGuideFadeOut.duration,i),i}function f(e){var t=e,n=e.elements,r=3.779527559*t.editor.configuration.recognitionParams.v4.text.margin.left,o=t.editor.domElement.clientWidth-r-n.tagElement.offsetWidth-35-r;n.textContainer.style.width=o+"px",n.textContainer.style.maxWidth=o+"px",r=n.tagElement.offsetWidth,r+=o,n.ellipsisElement.style.left=r+"px",n.smartGuideElement.style.width=n.tagElement.offsetWidth+n.textContainer.offsetWidth+n.ellipsisElement.offsetWidth+"px",t.perfectScrollbar.update()}function p(e){var t=e,n=e.elements,r=3.779527559*t.editor.configuration.recognitionParams.v4.text.margin.top,o=3.779527559*t.editor.configuration.recognitionParams.v4.text.margin.left,i=r-45.354330708,a=o;!function(e,r){n.smartGuideElement.style.top=r+"px",n.smartGuideElement.style.left=e+"px",n.smartGuideElement.style.visibility="hidden",t.editor.domElement.insertBefore(n.smartGuideElement,t.editor.loader)}(a,i),function(){n.smartGuideElement.appendChild(n.tagElement)}();var s=t.editor.domElement.clientWidth-a-n.tagElement.offsetWidth-35-a;a=n.tagElement.offsetWidth,function(e,t){n.textContainer.style.left=e+"px",n.textContainer.style.width=t+"px",n.textContainer.style.maxWidth=t+"px",n.smartGuideElement.appendChild(n.textContainer)}(a,s),a+=s,function(e){n.ellipsisElement.style.left=e+"px",n.smartGuideElement.appendChild(n.ellipsisElement)}(a),n.menuElement.style.display="none",n.menuElement.appendChild(n.convertElement),n.menuElement.appendChild(n.copyElement),n.menuElement.appendChild(n.deleteElement),n.smartGuideElement.appendChild(n.menuElement),n.candidatesElement.style.display="none",n.smartGuideElement.appendChild(n.candidatesElement),n.smartGuideElement.style.height="48px",n.smartGuideElement.style.width=n.tagElement.offsetWidth+n.textContainer.offsetWidth+n.ellipsisElement.offsetWidth+"px",t.perfectScrollbar.update()}function g(e,t){var n=e,r=e.elements,o=document.contains(r.smartGuideElement);i(r.smartGuideElement)||o||p(e);var a=function(t,n,r){var o=document.createElement("span");return o.id="word-"+n+e.randomString,t?o.innerHTML="&nbsp;":o.textContent=r.label,o};if(t&&JSON.parse(t[x.default.Exports.JIIX]).words.length>0){if(r.smartGuideElement.classList.add("smartguide-in"),r.smartGuideElement.classList.remove("smartguide-out"),r.candidatesElement.style.display="none",r.menuElement.style.display="none",n.previousLabelExport&&n.previousLabelExport!==JSON.parse(t[x.default.Exports.JIIX]).label){var s=JSON.parse(t[x.default.Exports.JIIX]).words;!function(e){r.textElement.innerHTML="";var t=document.createDocumentFragment();e.forEach(function(o,i){if(" "===o.label||o.label.includes("\n"))t.appendChild(a(!0,i));else if(i!==e.length-1)t.appendChild(a(!1,i,o));else{r.textElement.appendChild(t),n.perfectScrollbar.update(),""===n.lastWord&&(n.lastWord=o);var s=a(!1,i,o);n.lastWord.candidates!==o.candidates&&n.lastWord.label!==o.label?(s.classList.add("added-word"),r.textElement.appendChild(s),r.textContainer.scrollLeft=s.offsetLeft,n.lastWord=o):(r.textElement.appendChild(s),r.textContainer.scrollLeft=s.offsetLeft)}})}(s),function(o){if(n.tempWords&&n.tempWords.length===o.length){var i=o.map(function(e){return e.label}),a=n.tempWords.map(function(e){return e.label}),s=i.indexOf(i.filter(function(e){return-1===a.indexOf(e)})[0]);document.getElementById("word-"+s+e.randomString)&&s>-1&&(document.getElementById("word-"+s+e.randomString).classList.add("modified-word"),r.textContainer.scrollLeft=document.getElementById("word-"+s+e.randomString).offsetLeft-10)}n.tempWords=JSON.parse(t[x.default.Exports.JIIX]).words}(s)}n.previousLabelExport=JSON.parse(t[x.default.Exports.JIIX]).label,r.copyElement.setAttribute("data-clipboard-text",JSON.parse(t[x.default.Exports.JIIX]).label)}else r.smartGuideElement.classList.add("smartguide-out"),r.smartGuideElement.classList.remove("smartguide-in");return n}Object.defineProperty(t,"__esModule",{value:!0}),t.createSmartGuide=d,t.resize=f,t.insertSmartGuide=p,t.launchSmartGuide=g;var h=n(146),v=r(h),m=n(147),y=r(m),b=n(2),x=r(b);n(0)},function(e,t,n){"use strict";/*!
 * perfect-scrollbar v1.2.0
 * (c) 2017 Hyunje Jun
 * @license MIT
 */
function r(e){return getComputedStyle(e)}function o(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r+="px"),e.style[n]=r}return e}function i(e){var t=document.createElement("div");return t.className=e,t}function a(e,t){if(!x)throw new Error("No element matching method supported");return x.call(e,t)}function s(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function c(e,t){return Array.prototype.filter.call(e.children,function(e){return a(e,t)})}function l(e,t){var n=e.element.classList,r=_.state.scrolling(t);n.contains(r)?clearTimeout(E[t]):n.add(r)}function u(e,t){E[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(_.state.scrolling(t))},e.settings.scrollingThreshold)}function d(e,t){l(e,t),u(e,t)}function f(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function p(e,t,n,r,o){var i=n[0],a=n[1],s=n[2],c=n[3],l=n[4],u=n[5];void 0===r&&(r=!0),void 0===o&&(o=!1);var p=e.element;e.reach[c]=null,p[s]<1&&(e.reach[c]="start"),p[s]>e[i]-e[a]-1&&(e.reach[c]="end"),t&&(p.dispatchEvent(f("ps-scroll-"+c)),t<0?p.dispatchEvent(f("ps-scroll-"+l)):t>0&&p.dispatchEvent(f("ps-scroll-"+u)),r&&d(e,c)),e.reach[c]&&(t||o)&&p.dispatchEvent(f("ps-"+c+"-reach-"+e.reach[c]))}function g(e){return parseInt(e,10)||0}function h(e){return a(e,"input,[contenteditable]")||a(e,"select,[contenteditable]")||a(e,"textarea,[contenteditable]")||a(e,"button,[contenteditable]")}function v(e){var t=r(e);return g(t.width)+g(t.paddingLeft)+g(t.paddingRight)+g(t.borderLeftWidth)+g(t.borderRightWidth)}function m(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function y(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,o(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,o(t.scrollbarYRail,r),o(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),o(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function b(e,t){function n(t){g[f]=h+m*(t[a]-v),l(e,p),C(e),t.stopPropagation(),t.preventDefault()}function r(){u(e,p),e.event.unbind(e.ownerDocument,"mousemove",n)}var o=t[0],i=t[1],a=t[2],s=t[3],c=t[4],d=t[5],f=t[6],p=t[7],g=e.element,h=null,v=null,m=null;e.event.bind(e[c],"mousedown",function(t){h=g[f],v=t[a],m=(e[i]-e[o])/(e[s]-e[d]),e.event.bind(e.ownerDocument,"mousemove",n),e.event.once(e.ownerDocument,"mouseup",r),t.stopPropagation(),t.preventDefault()})}Object.defineProperty(t,"__esModule",{value:!0});var x=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector,_={main:"ps",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},E={x:null,y:null},S=function(e){this.element=e,this.handlers={}},w={isEmpty:{configurable:!0}};S.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},S.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter(function(r){return!(!t||r===t)||(n.element.removeEventListener(e,r,!1),!1)})},S.prototype.unbindAll=function(){var e=this;for(var t in e.handlers)e.unbind(t)},w.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(S.prototype,w);var P=function(){this.eventElements=[]};P.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new S(e),this.eventElements.push(t)),t},P.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},P.prototype.unbind=function(e,t,n){var r=this.eventElement(e);r.unbind(t,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},P.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},P.prototype.once=function(e,t,n){var r=this.eventElement(e),o=function(e){r.unbind(t,o),n(e)};r.bind(t,o)};var k=function(e,t,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!1);var i;if("top"===t)i=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");i=["contentWidth","containerWidth","scrollLeft","x","left","right"]}p(e,n,i,r,o)},R={isWebKit:document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:navigator&&navigator.msMaxTouchPoints},C=function(e){var t=e.element;e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(c(t,_.element.rail("x")).forEach(function(e){return s(e)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(c(t,_.element.rail("y")).forEach(function(e){return s(e)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=m(e,g(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=g((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=m(e,g(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=g(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),y(t,e),e.scrollbarXActive?t.classList.add(_.state.active("x")):(t.classList.remove(_.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),e.scrollbarYActive?t.classList.add(_.state.active("y")):(t.classList.remove(_.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)},T=function(e){e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,r=n>e.scrollbarYTop?1:-1;e.element.scrollTop+=r*e.containerHeight,C(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,r=n>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=r*e.containerWidth,C(e),t.stopPropagation()})},L=function(e){b(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x"]),b(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y"])},M=function(e){function t(t,r){var o=n.scrollTop;if(0===t){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var i=n.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&t<0||i>=e.contentWidth-e.containerWidth&&t>0)return!e.settings.wheelPropagation}return!0}var n=e.element,r=function(){return a(n,":hover")},o=function(){return a(e.scrollbarX,":focus")||a(e.scrollbarY,":focus")};e.event.bind(e.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&(r()||o())){var a=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(a){if("IFRAME"===a.tagName)a=a.contentDocument.activeElement;else for(;a.shadowRoot;)a=a.shadowRoot.activeElement;if(h(a))return}var s=0,c=0;switch(i.which){case 37:s=i.metaKey?-e.contentWidth:i.altKey?-e.containerWidth:-30;break;case 38:c=i.metaKey?e.contentHeight:i.altKey?e.containerHeight:30;break;case 39:s=i.metaKey?e.contentWidth:i.altKey?e.containerWidth:30;break;case 40:c=i.metaKey?-e.contentHeight:i.altKey?-e.containerHeight:-30;break;case 32:c=i.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:c=e.containerHeight;break;case 34:c=-e.containerHeight;break;case 36:c=e.contentHeight;break;case 35:c=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==s||e.settings.suppressScrollY&&0!==c||(n.scrollTop-=c,n.scrollLeft+=s,C(e),t(s,c)&&i.preventDefault())}})},A=function(e){function t(t,n){var r=a.scrollTop;if(0===t){if(!e.scrollbarYActive)return!1;if(0===r&&n>0||r>=e.contentHeight-e.containerHeight&&n<0)return!e.settings.wheelPropagation}var o=a.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===o&&t<0||o>=e.contentWidth-e.containerWidth&&t>0)return!e.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function o(e,t,n){if(!R.isWebKit&&a.querySelector("select:focus"))return!0;if(!a.contains(e))return!1;for(var o=e;o&&o!==a;){if(o.classList.contains(_.element.consuming))return!0;var i=r(o);if([i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&n>0||o.scrollTop===s&&n<0))return!0;var c=o.scrollLeft-o.clientWidth;if(c>0&&!(0===o.scrollLeft&&t<0||o.scrollLeft===c&&t>0))return!0}o=o.parentNode}return!1}function i(r){var i=n(r),s=i[0],c=i[1];if(!o(r.target,s,c)){var l=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(c?a.scrollTop-=c*e.settings.wheelSpeed:a.scrollTop+=s*e.settings.wheelSpeed,l=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(s?a.scrollLeft+=s*e.settings.wheelSpeed:a.scrollLeft-=c*e.settings.wheelSpeed,l=!0):(a.scrollTop-=c*e.settings.wheelSpeed,a.scrollLeft+=s*e.settings.wheelSpeed),C(e),l=l||t(s,c),l&&!r.ctrlKey&&(r.stopPropagation(),r.preventDefault())}}var a=e.element;void 0!==window.onwheel?e.event.bind(a,"wheel",i):void 0!==window.onmousewheel&&e.event.bind(a,"mousewheel",i)},O=function(e){function t(t,n){var r=u.scrollTop,o=u.scrollLeft,i=Math.abs(t),a=Math.abs(n);if(a>i){if(n<0&&r===e.contentHeight-e.containerHeight||n>0&&0===r)return{stop:!e.settings.swipePropagation,prevent:0===window.scrollY}}else if(i>a&&(t<0&&o===e.contentWidth-e.containerWidth||t>0&&0===o))return{stop:!e.settings.swipePropagation,prevent:!0};return{stop:!0,prevent:!0}}function n(t,n){u.scrollTop-=n,u.scrollLeft-=t,C(e)}function r(){h=!0}function o(){h=!1}function i(e){return e.targetTouches?e.targetTouches[0]:e}function a(e){return(!e.pointerType||"pen"!==e.pointerType||0!==e.buttons)&&(!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function s(e){if(a(e)){v=!0;var t=i(e);d.pageX=t.pageX,d.pageY=t.pageY,f=(new Date).getTime(),null!==g&&clearInterval(g),e.stopPropagation()}}function c(r){if(!v&&e.settings.swipePropagation&&s(r),!h&&v&&a(r)){var o=i(r),c={pageX:o.pageX,pageY:o.pageY},l=c.pageX-d.pageX,u=c.pageY-d.pageY;n(l,u),d=c;var g=(new Date).getTime(),m=g-f;m>0&&(p.x=l/m,p.y=u/m,f=g);var y=t(l,u),b=y.stop,x=y.prevent;b&&r.stopPropagation(),x&&r.preventDefault()}}function l(){!h&&v&&(v=!1,e.settings.swipeEasing&&(clearInterval(g),g=setInterval(function(){return e.isInitialized?void clearInterval(g):p.x||p.y?Math.abs(p.x)<.01&&Math.abs(p.y)<.01?void clearInterval(g):(n(30*p.x,30*p.y),p.x*=.8,void(p.y*=.8)):void clearInterval(g)},10)))}if(R.supportsTouch||R.supportsIePointer){var u=e.element,d={},f=0,p={},g=null,h=!1,v=!1;R.supportsTouch?(e.event.bind(window,"touchstart",r),e.event.bind(window,"touchend",o),e.event.bind(u,"touchstart",s),e.event.bind(u,"touchmove",c),e.event.bind(u,"touchend",l)):R.supportsIePointer&&(window.PointerEvent?(e.event.bind(window,"pointerdown",r),e.event.bind(window,"pointerup",o),e.event.bind(u,"pointerdown",s),e.event.bind(u,"pointermove",c),e.event.bind(u,"pointerup",l)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",r),e.event.bind(window,"MSPointerUp",o),e.event.bind(u,"MSPointerDown",s),e.event.bind(u,"MSPointerMove",c),e.event.bind(u,"MSPointerUp",l)))}},I=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1}},z={"click-rail":T,"drag-thumb":L,keyboard:M,wheel:A,touch:O},B=function(e,t){var n=this;if(void 0===t&&(t={}),"string"==typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(_.main),this.settings=I();for(var a in t)n.settings[a]=t[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return e.classList.add(_.state.focus)},c=function(){return e.classList.remove(_.state.focus)};this.isRtl="rtl"===r(e).direction,this.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new P,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=i(_.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=i(_.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",c),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=r(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=g(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=g(l.borderLeftWidth)+g(l.borderRightWidth),o(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=g(l.marginLeft)+g(l.marginRight),o(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i(_.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=i(_.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",c),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=r(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=g(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?v(this.scrollbarY):null,this.railBorderYWidth=g(u.borderTopWidth)+g(u.borderBottomWidth),o(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=g(u.marginTop)+g(u.marginBottom),o(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return z[e](n)}),this.lastScrollTop=e.scrollTop,this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(e){return n.onScroll(e)}),C(this)};B.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,o(this.scrollbarXRail,{display:"block"}),o(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=g(r(this.scrollbarXRail).marginLeft)+g(r(this.scrollbarXRail).marginRight),this.railYMarginHeight=g(r(this.scrollbarYRail).marginTop)+g(r(this.scrollbarYRail).marginBottom),o(this.scrollbarXRail,{display:"none"}),o(this.scrollbarYRail,{display:"none"}),C(this),k(this,"top",0,!1,!0),k(this,"left",0,!1,!0),o(this.scrollbarXRail,{display:""}),o(this.scrollbarYRail,{display:""}))},B.prototype.onScroll=function(e){this.isAlive&&(C(this),k(this,"top",this.element.scrollTop-this.lastScrollTop),k(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=this.element.scrollTop,this.lastScrollLeft=this.element.scrollLeft)},B.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),s(this.scrollbarX),s(this.scrollbarY),s(this.scrollbarXRail),s(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},B.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")},t.default=B},function(e,t,n){var r,o,i;!function(a,s){o=[e,n(148),n(150),n(151)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var l=o(t),u=o(n),d=o(r),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return s(t,e),p(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,d.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return c("action",e)}},{key:"defaultTarget",value:function(e){var t=c("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return c("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(u.default);e.exports=g})},function(e,t,n){var r,o,i;!function(a,s){o=[e,n(149)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}}(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})},function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}e.exports=n},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return o(e,t,n);if(s.nodeList(e))return i(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function i(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return c(document.body,e,t,n)}var s=n(152),c=n(153);e.exports=r},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e,t,n,r,i){var a=o.apply(this,arguments);return e.addEventListener(n,a,i),{destroy:function(){e.removeEventListener(n,a,i)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}var i=n(154);e.exports=r},function(e,t){function n(e,t){for(;e&&e.nodeType!==r;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){var i=e;o.editorLogger.debug("inkImporter start importing =>",t);var a=Object.assign({},i.behavior.grabber);a.detach=i.behavior.grabber.detach,i.behavior.grabber={};var s=[];t.forEach(function(e){e.convert?s.push({action:"convert",value:!0}):e.setDelay?s.push({action:"setDelay",value:e.setDelay}):(e.color&&s.push({action:"setColor",value:e.color}),e.X.forEach(function(t,n){var r="move";0===n?r="down":n===e.X.length-1&&(r="up"),s.push({action:r,point:{x:e.X[n],y:e.Y[n]}})}))}),o.editorLogger.debug("Array of actions =>",s);!function e(t,n,o){if(n<t.length){var s=t[n],c=o;if("convert"===s.action?i.convert():"setDelay"===s.action?c=s.value:"setColor"===s.action?i.penStyle={color:s.value}:(s.point.t=(new Date).getTime(),"down"===s.action?i.pointerDown(s.point):"up"===s.action?i.pointerUp(s.point):"move"===s.action&&i.pointerMove(s.point)),r&&n===t.map(function(e){return e.action}).lastIndexOf("down")-1)setTimeout(function(){e(t,n+1,c)},r);else if(n===t.length-1){var l=new Event("drawEnded");document.dispatchEvent(l),i.behavior.grabber=a}else setTimeout(function(){e(t,n+1,c)},c)}}(s,0,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.inkImporter=r;var o=n(0)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n,r,o){return u.editorLogger.debug("Registering a new editor"),new d.Editor(e,t,n,r,o)}function i(e){return"V4"===p.overrideDefaultConfiguration(e).recognitionParams.apiVersion?s:l}Object.defineProperty(t,"__esModule",{value:!0}),t.register=o,t.getAvailableLanguageList=i;var a=n(157),s=r(a),c=n(158),l=r(c),u=n(0),d=n(35),f=n(15),p=r(f)},function(e,t){e.exports={result:{af_ZA:"Afrikaans",az_AZ:"Azərbaycanca",be_BY:"Беларуская",bg_BG:"Български",bs_BA:"Bosanski",ca_ES:"Català",cs_CZ:"Čeština",da_DK:"Dansk",de_AT:"Deutsch (Österreich)",de_DE:"Deutsch",el_GR:"Ελληνικά",en_CA:"English (Canada)",en_GB:"English (United Kingdom)",en_US:"English (United States)",es_ES:"Español (España)",es_MX:"Español (México)",et_EE:"Eesti",eu_ES:"Euskara",fi_FI:"Suomi",fr_CA:"Français (Canada)",fr_FR:"Français (France)",ga_IE:"Gaeilge",gl_ES:"Galego",hr_HR:"Hrvatski",hu_HU:"Magyar",hy_AM:"Հայերեն",id_ID:"Bahasa Indonesia",is_IS:"Íslenska",it_IT:"Italiano",ja_JP:"日本語",ka_GE:"ქართული",kk_KZ:"Қазақша",ko_KR:"한국어",lt_LT:"Lietuvių",lv_LV:"Latviešu",mk_MK:"Македонски",mn_MN:"Монгол",ms_MY:"Bahasa Melayu (Malaysia)",nl_BE:"Nederlands (België)",nl_NL:"Nederlands",no_NO:"Norsk (Bokmål)",pl_PL:"Polski",pt_BR:"Português (Brasil)",pt_PT:"Português (Portugal)",ro_RO:"Română",ru_RU:"Русский",sk_SK:"Slovenčina",sl_SI:"Slovenščina",sq_AL:"Shqip",sr_Cyrl_RS:"Српски",sr_Latn_RS:"Srpski",sv_SE:"Svenska",tr_TR:"Türkçe",tt_RU:"Татарча",uk_UA:"Українська",vi_VN:"Tiếng Việt",zh_CN:"中文 (中国)",zh_HK:"中文 (香港)",zh_TW:"中文 (台灣)"}}},function(e,t){e.exports={result:{af_ZA:"Afrikaans",az_AZ:"Azərbaycanca",id_ID:"Bahasa Indonesia",ms_MY:"Bahasa Melayu (Malaysia)",bs_BA:"Bosanski",ca_ES:"Català",da_DK:"Dansk",de_DE:"Deutsch",de_AT:"Deutsch (Österreich)",et_EE:"Eesti",en_CA:"English (Canada)",en_GB:"English (United Kingdom)",en_US:"English (United States)",es_ES:"Español (España)",es_MX:"Español (México)",eu_ES:"Euskara",fr_CA:"Français (Canada)",fr_FR:"Français (France)",ga_IE:"Gaeilge",gl_ES:"Galego",hr_HR:"Hrvatski",it_IT:"Italiano",lv_LV:"Latviešu",lt_LT:"Lietuvių",hu_HU:"Magyar",nl_NL:"Nederlands",nl_BE:"Nederlands (België)",no_NO:"Norsk (Bokmål)",pl_PL:"Polski",pt_BR:"Português (Brasil)",pt_PT:"Português (Portugal)",ro_RO:"Română",sq_AL:"Shqip",sk_SK:"Slovenčina",sl_SI:"Slovenščina",sr_Latn_RS:"Srpski",fi_FI:"Suomi",sv_SE:"Svenska",th_TH:"Thaiไทย",vi_VN:"Tiếng Việt",tr_TR:"Türkçe",is_IS:"Íslenska",cs_CZ:"Čeština",el_GR:"Ελληνικά",be_BY:"Беларуская",bg_BG:"Български",mk_MK:"Македонски",mn_MN:"Монгол",ru_RU:"Русский",sr_Cyrl_RS:"Српски",tt_RU:"Татарча",uk_UA:"Українська",kk_KZ:"Қазақша",hy_AM:"Հայերեն",he_IL:"עברית",ur_PK:"اردو",ar:"العربية",fa_IR:"فارسی",hi_IN:"हिन्दी",ka_GE:"ქართული",zh_CN:"中文 (中国)",zh_TW:"中文 (台灣)",zh_HK:"中文 (香港)",ja_JP:"日本語",ko_KR:"한국어"}}}])});
//# sourceMappingURL=myscript.min.js.map