<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Shape - REST sample</title>
</head>

<body>
<h1>Shape - REST sample</h1>
<button id="trash">Trash</button>
<button id="undo">Undo</button>
<button id="redo">Redo</button>
<br/>
<div id="ink-paper" style="background-color: lightyellow; border: 1px solid darkgoldenrod; width: 400px; height: 300px;"></div>
<div id="result"></div>
</body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/core-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/x64-core-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/sha512-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/hmac-min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.2.1/q.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handjs/1.3.11/hand.min.js"></script>
<script type="text/javascript" src="../../lib/myscript.js"></script>
<script>
    (function () {
        function initialize() {
            var result = document.getElementById('result');
            var trash = document.getElementById('trash');
            var undo = document.getElementById('undo');
            var redo = document.getElementById('redo');
            var inkPaper = document.getElementById('ink-paper');

            var applicationKey = prompt("Please enter your application key", "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx");
            var hmacKey = prompt("Please enter your HMAC key", "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx");

            var options = {
                applicationKey: applicationKey, // MyScript Cloud application key
                hmacKey: hmacKey, // MyScript Cloud HMAC key
                type: 'SHAPE', // Recognition type
                timeout: 0, // Recognition timeout
                renderInput: false, // Do not draw the input components over the output
                renderOuput: true // Draw the recognition result
            };

            var resultCallback = function (data, error) {
                if (error) {
                    result.innerHTML = error;
                } else {
                    result.innerHTML = '';
                }
            };

            var paper = new MyScript.InkPaper(inkPaper, options, resultCallback);

            trash.addEventListener('click', function () {
                paper.clear();
                result.innerHTML = '';
            }, false);

            undo.addEventListener('click', function () {
                paper.undo();
            }, false);

            redo.addEventListener('click', function () {
                paper.redo();
            }, false);
        }

        MyScript.InkPaper.event.addDomListener(window, 'load', initialize);
    })();
</script>
</html>
